!function e(t,r,a){function n(i,o){if(!r[i]){if(!t[i]){var u="function"==typeof require&&require;if(!o&&u)return u(i,!0);if(l)return l(i,!0);var s=new Error("Cannot find module '"+i+"'");throw s.code="MODULE_NOT_FOUND",s}var c=r[i]={exports:{}};t[i][0].call(c.exports,(function(e){return n(t[i][1][e]||e)}),c,c.exports,e,t,r,a)}return r[i].exports}for(var l="function"==typeof require&&require,i=0;i<a.length;i++)n(a[i]);return n}({1:[function(e,t,r){"use strict";var a=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=a(e("./../wysiwygeditor/WysiwygEditor"));r.default=class{init(){document.addEventListener("DOMContentLoaded",()=>{this.initRepeater(),this.initAutoTranslate(),this.initAutoGrab(),this.initFormReset(),this.initFileUpload(),this.initFormChange(),this.initFormInverse(),this.initSubmitUnchecked(),this.initWysiwyg(),this.initWizardAutoTranslationChange()})}initRepeater(){document.addEventListener("click",e=>{let t=e.target.closest(".gtbabel__repeater-add");t&&(t.closest(".gtbabel__repeater").querySelector(".gtbabel__repeater-list").insertAdjacentHTML("beforeend",t.closest(".gtbabel__repeater").querySelector(".gtbabel__repeater-listitem:last-child").outerHTML),t.closest(".gtbabel__repeater").querySelector(".gtbabel__repeater-listitem:last-child").classList.remove("gtbabel__repeater-listitem--default"),t.closest(".gtbabel__repeater").querySelector(".gtbabel__repeater-listitem:last-child").classList.remove("gtbabel__repeater-listitem--missing"),t.closest(".gtbabel__repeater").querySelectorAll(".gtbabel__repeater-listitem:last-child input").forEach(e=>{e.value="",e.removeAttribute("readonly"),e.hasAttribute("data-name")&&(e.setAttribute("name",e.getAttribute("data-name")),e.removeAttribute("data-name"))}),e.preventDefault())}),document.addEventListener("click",e=>{let t=e.target.closest(".gtbabel__repeater-action--remove");t&&(t.closest(".gtbabel__repeater").querySelectorAll(".gtbabel__repeater-listitem").length>1?t.parentNode.remove():t.parentNode.querySelectorAll(".gtbabel__input").forEach(e=>{e.value=""}),e.preventDefault())}),document.addEventListener("click",e=>{let t=e.target.closest(".gtbabel__repeater-action--enable, .gtbabel__repeater-action--disable");t&&(t.closest(".gtbabel__repeater-listitem").querySelectorAll(".gtbabel__input").forEach(e=>{t.classList.contains("gtbabel__repeater-action--enable")?(t.closest(".gtbabel__repeater-listitem").classList.remove("gtbabel__repeater-listitem--missing"),e.setAttribute("name",e.getAttribute("data-name")),e.removeAttribute("data-name")):(t.closest(".gtbabel__repeater-listitem").classList.add("gtbabel__repeater-listitem--missing"),e.setAttribute("data-name",e.getAttribute("name")),e.removeAttribute("name"))}),e.preventDefault())})}initAutoTranslate(){document.addEventListener("click",e=>{let t=e.target.closest(".gtbabel__submit--auto-translate");if(t){null!==document.querySelector(".gtbabel__auto-translate")&&document.querySelector(".gtbabel__auto-translate").remove(),t.insertAdjacentHTML("afterend",'<div class="gtbabel__auto-translate" data-error-text="'+t.getAttribute("data-error-text")+'">'+t.getAttribute("data-loading-text")+"</div>");let r=t.getAttribute("data-href");null!==document.querySelector("#gtbabel_delete_unused")&&!0===document.querySelector("#gtbabel_delete_unused").checked&&(r+="&gtbabel_delete_unused=1"),null!==document.querySelector("#gtbabel_auto_set_discovered_strings_checked")&&!0!==document.querySelector("#gtbabel_auto_set_discovered_strings_checked").checked||(r+="&gtbabel_auto_set_discovered_strings_checked=1"),t.remove(),this.fetchNextAutoTranslate(r),e.preventDefault()}})}fetchNextAutoTranslate(e,t=0){t>10?null!==document.querySelector(".gtbabel__auto-translate")&&(document.querySelector(".gtbabel__auto-translate").innerHTML='<span class="gtbabel__auto-translate-error">'+document.querySelector(".gtbabel__auto-translate").getAttribute("data-error-text")+"</span>"):fetch(e).then(e=>200==e.status||304==e.status?e.text():null).catch(()=>null).then(r=>{let a=null;null===r&&void 0===r&&""==r||(a=(new DOMParser).parseFromString(r,"text/html")),null===a||null===a.querySelector(".gtbabel__auto-translate")?setTimeout(()=>{this.fetchNextAutoTranslate(e,t+1)},3e3):(null!==document.querySelector(".gtbabel__auto-translate")&&null!==a.querySelector(".gtbabel__auto-translate")&&(document.querySelector(".gtbabel__auto-translate").innerHTML=a.querySelector(".gtbabel__auto-translate").innerHTML),null!==document.querySelector(".gtbabel__stats-log")&&null!==a.querySelector(".gtbabel__stats-log")&&(document.querySelector(".gtbabel__stats-log").innerHTML=a.querySelector(".gtbabel__stats-log").innerHTML),null!==a.querySelector(".gtbabel__auto-translate-next")&&this.fetchNextAutoTranslate(a.querySelector(".gtbabel__auto-translate-next").getAttribute("href")))})}initAutoGrab(){document.addEventListener("click",e=>{let t=e.target.closest(".gtbabel__submit--auto-grab");if(t){null!==document.querySelector(".gtbabel__auto-grab")&&document.querySelector(".gtbabel__auto-grab").remove(),t.insertAdjacentHTML("afterend",'<div class="gtbabel__auto-grab" data-error-text="'+t.getAttribute("data-error-text")+'">'+t.getAttribute("data-loading-text")+"</div>");let r=t.getAttribute("data-href");null!==document.querySelector("#gtbabel_auto_grab_url")&&""!=document.querySelector("#gtbabel_auto_grab_url").value&&(r+="&gtbabel_auto_grab_url="+document.querySelector("#gtbabel_auto_grab_url").value),null!==document.querySelector("#gtbabel_auto_grab_dry_run")&&!0===document.querySelector("#gtbabel_auto_grab_dry_run").checked&&(r+="&gtbabel_auto_grab_dry_run=1"),t.remove(),this.fetchNextAutoGrab(r),e.preventDefault()}})}fetchNextAutoGrab(e,t=0){t>10?null!==document.querySelector(".gtbabel__auto-grab")&&(document.querySelector(".gtbabel__auto-grab").innerHTML='<span class="gtbabel__auto-grab-error">'+document.querySelector(".gtbabel__auto-grab").getAttribute("data-error-text")+"</span>"):fetch(e).then(e=>200==e.status||304==e.status?e.text():null).catch(()=>null).then(r=>{let a=null;null===r&&void 0===r&&""==r||(a=(new DOMParser).parseFromString(r,"text/html")),null===a||null===a.querySelector(".gtbabel__auto-grab")?setTimeout(()=>{this.fetchNextAutoGrab(e,t+1)},3e3):(null!==document.querySelector(".gtbabel__auto-grab")&&null!==a.querySelector(".gtbabel__auto-grab")&&(document.querySelector(".gtbabel__auto-grab").innerHTML=a.querySelector(".gtbabel__auto-grab").innerHTML),null!==a.querySelector(".gtbabel__auto-grab-next")&&this.fetchNextAutoGrab(a.querySelector(".gtbabel__auto-grab-next").getAttribute("href")))})}initFileUpload(){document.addEventListener("click",e=>{let t=e.target.closest(".gtbabel__file-info-upload");if(t){let r;r&&r.open(),r=wp.media({multiple:!1}),r.on("close",()=>{let e=null,a=r.state().get("selection"),n=t.closest(".gtbabel__table-cell").querySelector(".gtbabel__file-info-img"),l=t.closest(".gtbabel__table-cell").querySelector(".gtbabel__input--textarea"),i=null!==l&&0===l.value.indexOf("http");a.length>0&&a.forEach(t=>{e=t.attributes.url}),null!==e&&(n.setAttribute("src",e),!1===i&&(e=e.replace(window.location.protocol+"//"+window.location.host,""),e=e.replace(/^\/+|\/+$/g,"")),l.value=e,l.dispatchEvent(new Event("change",{bubbles:!0})))}),r.open(),e.preventDefault()}})}initFormReset(){document.addEventListener("click",e=>{let t=e.target.closest(".gtbabel__submit--reset");if(t){"REMOVE"!==prompt(t.getAttribute("data-question"))&&e.preventDefault()}})}initFormChange(){document.addEventListener("change",e=>{e.target.closest(".gtbabel__input--on-change")&&e.target.setAttribute("name",e.target.getAttribute("data-name"))})}initFormInverse(){document.addEventListener("change",e=>{e.target.closest(".gtbabel__input--inverse")&&(e.target.nextElementSibling.value=!0===e.target.checked?"0":"1")})}initSubmitUnchecked(){document.addEventListener("submit",e=>{if(e.target.closest(".gtbabel__form")){let t=null;t=e.target.closest(".gtbabel__form").querySelectorAll(".gtbabel__input--submit-unchecked:not(:checked)[name]:not([name$='[]']):not([disabled=\"disabled\"])"),t.length>0&&t.forEach(e=>{null!==e.previousElementSibling&&"hidden"===e.previousElementSibling.getAttribute("type")&&"0"==e.previousElementSibling.value||e.insertAdjacentHTML("beforebegin",'<input type="hidden" value="0" name="'+e.getAttribute("name")+'" />')})}})}initWysiwyg(){null!==document.querySelector(".gtbabel__wysiwyg-textarea")&&document.querySelectorAll(".gtbabel__wysiwyg-textarea").forEach(e=>{(new n.default).init(e)})}initWizardAutoTranslationChange(){let e=document.querySelector(".gtbabel__input--wizard-auto-translation-service-provider");null!==e&&(this.initWizardAutoTranslationChangeUpdate(e),e.addEventListener("change",t=>{this.initWizardAutoTranslationChangeUpdate(e)}))}initWizardAutoTranslationChangeUpdate(e){let t=e.closest("form").querySelector(".gtbabel__input--wizard-auto-translation-service-api-key");t.style.display="manual"===e.value||"custom"===e.value?"none":"inline-block",t.required="manual"!==e.value&&"custom"!==e.value,t.value=e.options[e.selectedIndex].getAttribute("data-api-key")}}},{"./../wysiwygeditor/WysiwygEditor":3,"@babel/runtime/helpers/interopRequireDefault":4}],2:[function(e,t,r){"use strict";(new(e("@babel/runtime/helpers/interopRequireDefault")(e("./WpBackend")).default)).init()},{"./WpBackend":1,"@babel/runtime/helpers/interopRequireDefault":4}],3:[function(e,t,r){"use strict";var a=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=a(e("pell"));r.default=class{init(e){if(null!==e){let t=Array.from((new DOMParser).parseFromString(e.value,"text/html").body.childNodes).some(e=>1===e.nodeType);e.classList.add("gtbabel__wysiwyg-textarea"),e.setAttribute("spellcheck","false"),!1===t&&(e.style.display="block"),this.textareaAutoHeight(e);let r=document.createElement("div");if(r.setAttribute("class","gtbabel__wysiwyg gtbabel__wysiwyg--mode-"+(!0===t?"visual":"html")),e.parentNode.insertBefore(r,e.nextSibling),r.appendChild(e),!0===t&&r.insertAdjacentHTML("afterbegin",'\n                <div class="gtbabel__wysiwyg-buttons">\n                    <a class="gtbabel__wysiwyg-button gtbabel__wysiwyg-button--visual" href="#">Visuell</a>\n                    <a class="gtbabel__wysiwyg-button gtbabel__wysiwyg-button--html" href="#">HTML</a>\n                </div>\n            '),r.querySelectorAll(".gtbabel__wysiwyg-button").forEach(t=>{t.addEventListener("click",t=>{t.target.classList.contains("gtbabel__wysiwyg-button--html")&&r.classList.contains("gtbabel__wysiwyg--mode-visual")&&(r.classList.remove("gtbabel__wysiwyg--mode-visual"),r.classList.add("gtbabel__wysiwyg--mode-html"),this.textareaAutoHeight(e)),t.target.classList.contains("gtbabel__wysiwyg-button--visual")&&r.classList.contains("gtbabel__wysiwyg--mode-html")&&(r.classList.remove("gtbabel__wysiwyg--mode-html"),r.classList.add("gtbabel__wysiwyg--mode-visual")),t.preventDefault()})}),!0===t){let t=document.createElement("div");t.setAttribute("class","gtbabel__wysiwyg-editor"),e.hasAttribute("readonly")&&t.classList.add("gtbabel__wysiwyg-editor--readonly"),r.appendChild(t);let a=n.default.init({element:t,onChange:t=>{t=t.replace(/^<div>/g,"").replace(/<\/div>$/g,"").replace(/<\/div>(\r\n|\r|\n)?<div.*?>/g,"<br/>").replace(/<div.*?>/g,"").replace(/<\/div>/g,""),e.value=t},defaultParagraphSeparator:"div",styleWithCSS:!1,actions:["bold","underline","italic","ulist","olist"]});e.hasAttribute("readonly")&&a.content.removeAttribute("contenteditable"),a.content.innerHTML="<div>"+e.value+"</div>",e.addEventListener("keyup",()=>{a.content.innerHTML="<div>"+e.value+"</div>"})}}}textareaAutoHeight(e){this.textareaSetHeight(e),e.addEventListener("keyup",e=>{this.textareaSetHeight(e.target)})}textareaSetHeight(e){e.style.height="5px",e.style.height=e.scrollHeight+"px"}}},{"@babel/runtime/helpers/interopRequireDefault":4,pell:5}],4:[function(e,t,r){t.exports=function(e){return e&&e.__esModule?e:{default:e}}},{}],5:[function(e,t,r){!function(e,a){"object"==typeof r&&void 0!==t?a(r):"function"==typeof define&&define.amd?define(["exports"],a):a(e.pell={})}(this,(function(e){"use strict";var t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},r="defaultParagraphSeparator",a="formatBlock",n=function(e,t,r){return e.addEventListener(t,r)},l=function(e,t){return e.appendChild(t)},i=function(e){return document.createElement(e)},o=function(e){return document.queryCommandState(e)},u=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return document.execCommand(e,!1,t)},s={bold:{icon:"<b>B</b>",title:"Bold",state:function(){return o("bold")},result:function(){return u("bold")}},italic:{icon:"<i>I</i>",title:"Italic",state:function(){return o("italic")},result:function(){return u("italic")}},underline:{icon:"<u>U</u>",title:"Underline",state:function(){return o("underline")},result:function(){return u("underline")}},strikethrough:{icon:"<strike>S</strike>",title:"Strike-through",state:function(){return o("strikeThrough")},result:function(){return u("strikeThrough")}},heading1:{icon:"<b>H<sub>1</sub></b>",title:"Heading 1",result:function(){return u(a,"<h1>")}},heading2:{icon:"<b>H<sub>2</sub></b>",title:"Heading 2",result:function(){return u(a,"<h2>")}},paragraph:{icon:"&#182;",title:"Paragraph",result:function(){return u(a,"<p>")}},quote:{icon:"&#8220; &#8221;",title:"Quote",result:function(){return u(a,"<blockquote>")}},olist:{icon:"&#35;",title:"Ordered List",result:function(){return u("insertOrderedList")}},ulist:{icon:"&#8226;",title:"Unordered List",result:function(){return u("insertUnorderedList")}},code:{icon:"&lt;/&gt;",title:"Code",result:function(){return u(a,"<pre>")}},line:{icon:"&#8213;",title:"Horizontal Line",result:function(){return u("insertHorizontalRule")}},link:{icon:"&#128279;",title:"Link",result:function(){var e=window.prompt("Enter the link URL");e&&u("createLink",e)}},image:{icon:"&#128247;",title:"Image",result:function(){var e=window.prompt("Enter the image URL");e&&u("insertImage",e)}}},c={actionbar:"pell-actionbar",button:"pell-button",content:"pell-content",selected:"pell-button-selected"},b=function(e){var o=e.actions?e.actions.map((function(e){return"string"==typeof e?s[e]:s[e.name]?t({},s[e.name],e):e})):Object.keys(s).map((function(e){return s[e]})),b=t({},c,e.classes),d=e[r]||"div",g=i("div");g.className=b.actionbar,l(e.element,g);var _=e.element.content=i("div");return _.contentEditable=!0,_.className=b.content,_.oninput=function(t){var r=t.target.firstChild;r&&3===r.nodeType?u(a,"<"+d+">"):"<br>"===_.innerHTML&&(_.innerHTML=""),e.onChange(_.innerHTML)},_.onkeydown=function(e){"Enter"===e.key&&"blockquote"===(a,document.queryCommandValue("formatBlock"))&&setTimeout((function(){return u(a,"<"+d+">")}),0)},l(e.element,_),o.forEach((function(e){var t=i("button");if(t.className=b.button,t.innerHTML=e.icon,t.title=e.title,t.setAttribute("type","button"),t.onclick=function(){return e.result()&&_.focus()},e.state){var r=function(){return t.classList[e.state()?"add":"remove"](b.selected)};n(_,"keyup",r),n(_,"mouseup",r),n(t,"click",r)}l(g,t)})),e.styleWithCSS&&u("styleWithCSS"),u(r,d),e.element},d={exec:u,init:b};e.exec=u,e.init=b,e.default=d,Object.defineProperty(e,"__esModule",{value:!0})}))},{}]},{},[2]);