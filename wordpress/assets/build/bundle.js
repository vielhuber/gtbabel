!function e(t,r,n){function l(u,i){if(!r[u]){if(!t[u]){var o="function"==typeof require&&require;if(!i&&o)return o(u,!0);if(a)return a(u,!0);var s=new Error("Cannot find module '"+u+"'");throw s.code="MODULE_NOT_FOUND",s}var c=r[u]={exports:{}};t[u][0].call(c.exports,(function(e){return l(t[u][1][e]||e)}),c,c.exports,e,t,r,n)}return r[u].exports}for(var a="function"==typeof require&&require,u=0;u<n.length;u++)l(n[u]);return l}({1:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var l=n(e("./../wysiwygeditor/WysiwygEditor"));r.default=class{init(){document.addEventListener("DOMContentLoaded",()=>{document.addEventListener("click",e=>{let t=e.target.closest(".gtbabel__repeater-add");t&&(t.closest(".gtbabel__repeater").querySelector(".gtbabel__repeater-list").insertAdjacentHTML("beforeend",t.closest(".gtbabel__repeater").querySelector(".gtbabel__repeater-listitem:last-child").outerHTML),t.closest(".gtbabel__repeater").querySelectorAll(".gtbabel__repeater-listitem:last-child input").forEach(e=>{e.value=""}),e.preventDefault())}),document.addEventListener("click",e=>{let t=e.target.closest(".gtbabel__repeater-remove");t&&(t.closest(".gtbabel__repeater").querySelectorAll(".gtbabel__repeater-listitem").length>1?t.parentNode.remove():t.parentNode.querySelectorAll(".gtbabel__input").forEach(e=>{e.value=""}),e.preventDefault())}),document.addEventListener("click",e=>{let t=e.target.closest(".gtbabel__submit--auto-translate");if(t){null!==document.querySelector(".gtbabel__auto-translate")&&document.querySelector(".gtbabel__auto-translate").remove(),t.insertAdjacentHTML("afterend",'<div class="gtbabel__auto-translate" data-error-text="'+t.getAttribute("data-error-text")+'">'+t.getAttribute("data-loading-text")+"</div>");let r=t.getAttribute("data-href");null!==document.querySelector("#gtbabel_delete_unused")&&!0===document.querySelector("#gtbabel_delete_unused").checked&&(r+="&gtbabel_delete_unused=1"),null!==document.querySelector("#gtbabel_auto_set_discovered_strings_checked")&&!0!==document.querySelector("#gtbabel_auto_set_discovered_strings_checked").checked||(r+="&gtbabel_auto_set_discovered_strings_checked=1"),t.remove(),this.fetchNextAutoTranslate(r),e.preventDefault()}}),document.addEventListener("click",e=>{let t=e.target.closest(".gtbabel__submit--auto-grab");if(t){null!==document.querySelector(".gtbabel__auto-grab")&&document.querySelector(".gtbabel__auto-grab").remove(),t.insertAdjacentHTML("afterend",'<div class="gtbabel__auto-grab" data-error-text="'+t.getAttribute("data-error-text")+'">'+t.getAttribute("data-loading-text")+"</div>");let r=t.getAttribute("data-href");null!==document.querySelector("#gtbabel_auto_grab_url")&&""!=document.querySelector("#gtbabel_auto_grab_url").value&&(r+="&gtbabel_auto_grab_url="+document.querySelector("#gtbabel_auto_grab_url").value),null!==document.querySelector("#gtbabel_auto_grab_dry_run")&&!0===document.querySelector("#gtbabel_auto_grab_dry_run").checked&&(r+="&gtbabel_auto_grab_dry_run=1"),t.remove(),this.fetchNextAutoGrab(r),e.preventDefault()}}),document.addEventListener("click",e=>{let t=e.target.closest(".gtbabel__submit--reset");if(t){"REMOVE"!==prompt(t.getAttribute("data-question"))&&e.preventDefault()}}),document.addEventListener("click",e=>{let t=e.target.closest(".gtbabel__file-info-upload");if(t){let r;r&&r.open(),r=wp.media({multiple:!1}),r.on("close",()=>{let e=null,n=r.state().get("selection"),l=t.closest(".gtbabel__table-cell").querySelector(".gtbabel__file-info-img"),a=t.closest(".gtbabel__table-cell").querySelector(".gtbabel__input--textarea");n.length>0&&n.forEach(t=>{e=t.attributes.url}),null!==e&&(l.setAttribute("src",e),e=e.replace(window.location.protocol+"//"+window.location.host,""),e=e.replace(/^\/+|\/+$/g,""),a.value=e,a.dispatchEvent(new Event("change",{bubbles:!0})))}),r.open(),e.preventDefault()}}),document.addEventListener("change",e=>{e.target.closest(".gtbabel__input--on-change")&&e.target.setAttribute("name",e.target.getAttribute("data-name"))}),document.addEventListener("change",e=>{e.target.closest(".gtbabel__input--inverse")&&(e.target.nextElementSibling.value=!0===e.target.checked?"0":"1")}),document.addEventListener("submit",e=>{if(e.target.closest(".gtbabel__form")){let t=null;t=e.target.closest(".gtbabel__form").querySelectorAll(".gtbabel__input--submit-unchecked:not(:checked)[name]:not([name$='[]']):not([disabled=\"disabled\"])"),t.length>0&&t.forEach(e=>{null!==e.previousElementSibling&&"hidden"===e.previousElementSibling.getAttribute("type")&&"0"==e.previousElementSibling.value||e.insertAdjacentHTML("beforebegin",'<input type="hidden" value="0" name="'+e.getAttribute("name")+'" />')})}}),null!==document.querySelector(".gtbabel__wysiwyg-textarea")&&document.querySelectorAll(".gtbabel__wysiwyg-textarea").forEach(e=>{(new l.default).init(e)})})}fetchNextAutoTranslate(e,t=0){t>10?null!==document.querySelector(".gtbabel__auto-translate")&&(document.querySelector(".gtbabel__auto-translate").innerHTML='<span class="gtbabel__auto-translate-error">'+document.querySelector(".gtbabel__auto-translate").getAttribute("data-error-text")+"</span>"):fetch(e).then(e=>200==e.status||304==e.status?e.text():null).catch(()=>null).then(r=>{let n=null;null===r&&void 0===r&&""==r||(n=(new DOMParser).parseFromString(r,"text/html")),null===n||null===n.querySelector(".gtbabel__auto-translate")?setTimeout(()=>{this.fetchNextAutoTranslate(e,t+1)},3e3):(null!==document.querySelector(".gtbabel__auto-translate")&&null!==n.querySelector(".gtbabel__auto-translate")&&(document.querySelector(".gtbabel__auto-translate").innerHTML=n.querySelector(".gtbabel__auto-translate").innerHTML),null!==document.querySelector(".gtbabel__stats-log")&&null!==n.querySelector(".gtbabel__stats-log")&&(document.querySelector(".gtbabel__stats-log").innerHTML=n.querySelector(".gtbabel__stats-log").innerHTML),null!==n.querySelector(".gtbabel__auto-translate-next")&&this.fetchNextAutoTranslate(n.querySelector(".gtbabel__auto-translate-next").getAttribute("href")))})}fetchNextAutoGrab(e,t=0){t>10?null!==document.querySelector(".gtbabel__auto-grab")&&(document.querySelector(".gtbabel__auto-grab").innerHTML='<span class="gtbabel__auto-grab-error">'+document.querySelector(".gtbabel__auto-grab").getAttribute("data-error-text")+"</span>"):fetch(e).then(e=>200==e.status||304==e.status?e.text():null).catch(()=>null).then(r=>{let n=null;null===r&&void 0===r&&""==r||(n=(new DOMParser).parseFromString(r,"text/html")),null===n||null===n.querySelector(".gtbabel__auto-grab")?setTimeout(()=>{this.fetchNextAutoGrab(e,t+1)},3e3):(null!==document.querySelector(".gtbabel__auto-grab")&&null!==n.querySelector(".gtbabel__auto-grab")&&(document.querySelector(".gtbabel__auto-grab").innerHTML=n.querySelector(".gtbabel__auto-grab").innerHTML),null!==n.querySelector(".gtbabel__auto-grab-next")&&this.fetchNextAutoGrab(n.querySelector(".gtbabel__auto-grab-next").getAttribute("href")))})}}},{"./../wysiwygeditor/WysiwygEditor":3,"@babel/runtime/helpers/interopRequireDefault":4}],2:[function(e,t,r){"use strict";(new(e("@babel/runtime/helpers/interopRequireDefault")(e("./WpBackend")).default)).init()},{"./WpBackend":1,"@babel/runtime/helpers/interopRequireDefault":4}],3:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var l=n(e("pell"));r.default=class{init(e){if(null!==e){let t=Array.from((new DOMParser).parseFromString(e.value,"text/html").body.childNodes).some(e=>1===e.nodeType);e.classList.add("gtbabel__wysiwyg-textarea"),e.setAttribute("spellcheck","false"),!1===t&&(e.style.display="block"),this.textareaAutoHeight(e);let r=document.createElement("div");if(r.setAttribute("class","gtbabel__wysiwyg gtbabel__wysiwyg--mode-"+(!0===t?"visual":"html")),e.parentNode.insertBefore(r,e.nextSibling),r.appendChild(e),!0===t&&r.insertAdjacentHTML("afterbegin",'\n                <div class="gtbabel__wysiwyg-buttons">\n                    <a class="gtbabel__wysiwyg-button gtbabel__wysiwyg-button--visual" href="#">Visuell</a>\n                    <a class="gtbabel__wysiwyg-button gtbabel__wysiwyg-button--html" href="#">HTML</a>\n                </div>\n            '),r.querySelectorAll(".gtbabel__wysiwyg-button").forEach(t=>{t.addEventListener("click",t=>{t.target.classList.contains("gtbabel__wysiwyg-button--html")&&r.classList.contains("gtbabel__wysiwyg--mode-visual")&&(r.classList.remove("gtbabel__wysiwyg--mode-visual"),r.classList.add("gtbabel__wysiwyg--mode-html"),this.textareaAutoHeight(e)),t.target.classList.contains("gtbabel__wysiwyg-button--visual")&&r.classList.contains("gtbabel__wysiwyg--mode-html")&&(r.classList.remove("gtbabel__wysiwyg--mode-html"),r.classList.add("gtbabel__wysiwyg--mode-visual")),t.preventDefault()})}),!0===t){let t=document.createElement("div");t.setAttribute("class","gtbabel__wysiwyg-editor"),e.hasAttribute("readonly")&&t.classList.add("gtbabel__wysiwyg-editor--readonly"),r.appendChild(t);let n=l.default.init({element:t,onChange:t=>{t=t.replace(/^<div>/g,"").replace(/<\/div>$/g,"").replace(/<\/div>(\r\n|\r|\n)?<div.*?>/g,"<br/>").replace(/<div.*?>/g,"").replace(/<\/div>/g,""),e.value=t},defaultParagraphSeparator:"div",styleWithCSS:!1,actions:["bold","underline","italic","ulist","olist"]});e.hasAttribute("readonly")&&n.content.removeAttribute("contenteditable"),n.content.innerHTML="<div>"+e.value+"</div>",e.addEventListener("keyup",()=>{n.content.innerHTML="<div>"+e.value+"</div>"})}}}textareaAutoHeight(e){this.textareaSetHeight(e),e.addEventListener("keyup",e=>{this.textareaSetHeight(e.target)})}textareaSetHeight(e){e.style.height="5px",e.style.height=e.scrollHeight+"px"}}},{"@babel/runtime/helpers/interopRequireDefault":4,pell:5}],4:[function(e,t,r){t.exports=function(e){return e&&e.__esModule?e:{default:e}}},{}],5:[function(e,t,r){!function(e,n){"object"==typeof r&&void 0!==t?n(r):"function"==typeof define&&define.amd?define(["exports"],n):n(e.pell={})}(this,(function(e){"use strict";var t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},r="defaultParagraphSeparator",n="formatBlock",l=function(e,t,r){return e.addEventListener(t,r)},a=function(e,t){return e.appendChild(t)},u=function(e){return document.createElement(e)},i=function(e){return document.queryCommandState(e)},o=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return document.execCommand(e,!1,t)},s={bold:{icon:"<b>B</b>",title:"Bold",state:function(){return i("bold")},result:function(){return o("bold")}},italic:{icon:"<i>I</i>",title:"Italic",state:function(){return i("italic")},result:function(){return o("italic")}},underline:{icon:"<u>U</u>",title:"Underline",state:function(){return i("underline")},result:function(){return o("underline")}},strikethrough:{icon:"<strike>S</strike>",title:"Strike-through",state:function(){return i("strikeThrough")},result:function(){return o("strikeThrough")}},heading1:{icon:"<b>H<sub>1</sub></b>",title:"Heading 1",result:function(){return o(n,"<h1>")}},heading2:{icon:"<b>H<sub>2</sub></b>",title:"Heading 2",result:function(){return o(n,"<h2>")}},paragraph:{icon:"&#182;",title:"Paragraph",result:function(){return o(n,"<p>")}},quote:{icon:"&#8220; &#8221;",title:"Quote",result:function(){return o(n,"<blockquote>")}},olist:{icon:"&#35;",title:"Ordered List",result:function(){return o("insertOrderedList")}},ulist:{icon:"&#8226;",title:"Unordered List",result:function(){return o("insertUnorderedList")}},code:{icon:"&lt;/&gt;",title:"Code",result:function(){return o(n,"<pre>")}},line:{icon:"&#8213;",title:"Horizontal Line",result:function(){return o("insertHorizontalRule")}},link:{icon:"&#128279;",title:"Link",result:function(){var e=window.prompt("Enter the link URL");e&&o("createLink",e)}},image:{icon:"&#128247;",title:"Image",result:function(){var e=window.prompt("Enter the image URL");e&&o("insertImage",e)}}},c={actionbar:"pell-actionbar",button:"pell-button",content:"pell-content",selected:"pell-button-selected"},b=function(e){var i=e.actions?e.actions.map((function(e){return"string"==typeof e?s[e]:s[e.name]?t({},s[e.name],e):e})):Object.keys(s).map((function(e){return s[e]})),b=t({},c,e.classes),d=e[r]||"div",g=u("div");g.className=b.actionbar,a(e.element,g);var _=e.element.content=u("div");return _.contentEditable=!0,_.className=b.content,_.oninput=function(t){var r=t.target.firstChild;r&&3===r.nodeType?o(n,"<"+d+">"):"<br>"===_.innerHTML&&(_.innerHTML=""),e.onChange(_.innerHTML)},_.onkeydown=function(e){"Enter"===e.key&&"blockquote"===(n,document.queryCommandValue("formatBlock"))&&setTimeout((function(){return o(n,"<"+d+">")}),0)},a(e.element,_),i.forEach((function(e){var t=u("button");if(t.className=b.button,t.innerHTML=e.icon,t.title=e.title,t.setAttribute("type","button"),t.onclick=function(){return e.result()&&_.focus()},e.state){var r=function(){return t.classList[e.state()?"add":"remove"](b.selected)};l(_,"keyup",r),l(_,"mouseup",r),l(t,"click",r)}a(g,t)})),e.styleWithCSS&&o("styleWithCSS"),o(r,d),e.element},d={exec:o,init:b};e.exec=o,e.init=b,e.default=d,Object.defineProperty(e,"__esModule",{value:!0})}))},{}]},{},[2]);