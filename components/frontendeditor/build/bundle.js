!function t(e,n,r){function o(s,a){if(!n[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(i)return i(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[s]={exports:{}};e[s][0].call(c.exports,(function(t){return o(e[s][1][t]||t)}),c,c.exports,t,e,n,r)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(t,e,n){"use strict";var r=t("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=t("diff-dom"),i=r(t("./../wysiwygeditor/WysiwygEditor")),s=t("locutus/php/url/base64_encode"),a=t("locutus/php/url/base64_decode"),u=t("locutus/php/var/serialize"),l=t("locutus/php/var/unserialize");n.default=class{constructor(){this.dd=new o.DiffDOM,this.editor=new i.default,this.attrName="data-gtbabel-meta",this.attrNameKey="data-gtbabel-meta-key",this.classNameEdit="gtbabel-frontend-editor-edit-active",this.classNameButton="gtbabel-frontend-editor-edit-button",this.classNameContainer="gtbabel-frontend-editor-container",this.classNameContainerSubmit="gtbabel-frontend-editor-container-submit",this.classNameContainerClose="gtbabel-frontend-editor-container-close",this.classNameContainerList="gtbabel-frontend-editor-container-list",this.classNameContainerListitem="gtbabel-frontend-editor-container-listitem",this.classNameContainerListitemTextarea="gtbabel-frontend-editor-container-listitem-textarea",this.classNameContainerListitemStr="gtbabel-frontend-editor-container-listitem-str",this.classNameContainerListitemContext="gtbabel-frontend-editor-container-listitem-context",this.classNameContainerListitemTrans="gtbabel-frontend-editor-container-listitem-trans"}init(){this.bindHover(),this.bindClick(),this.bindClose(),this.bindSave()}bindHover(){document.documentElement.addEventListener("mouseenter",t=>{if(t.target.hasAttribute(this.attrName)&&!t.target.classList.contains(this.classNameEdit)&&(document.querySelectorAll("."+this.classNameEdit).length>0&&document.querySelectorAll("."+this.classNameEdit).forEach(e=>{e.contains(t.target)||(e.classList.remove(this.classNameEdit),e.querySelectorAll(":scope > ."+this.classNameButton).length>0&&e.querySelectorAll(":scope > ."+this.classNameButton).forEach(t=>{t.remove()}))}),t.target.classList.add(this.classNameEdit),0===t.target.querySelectorAll(":scope > ."+this.classNameButton).length&&!["TEXTAREA","INPUT","SELECT","IFRAME","IMG"].includes(t.target.tagName))){let e=`\n                            <a href="#" class="${this.classNameButton}"></a>\n                        `;t.target.insertAdjacentHTML("afterbegin",e);let n=t.target.querySelector(":scope > ."+this.classNameButton);"inline"===window.getComputedStyle(t.target).display&&n.style.setProperty("display","inline","important"),this.positionAtTopLeft(n),this.fixAllPositions(n)}},!0)}positionAtTopLeft(t){let e=null;for(e=50;e>0&&t.getBoundingClientRect().top-t.parentNode.getBoundingClientRect().top>0;){let n=t.style.marginTop;n=""==n?0:parseInt(n),t.style.setProperty("margin-top",n-1+"px","important"),e--}for(e=50;e>0&&t.getBoundingClientRect().left>0&&t.getBoundingClientRect().left-t.parentNode.getBoundingClientRect().left>-20;){let n=t.style.marginLeft;n=""==n?0:parseInt(n),t.style.setProperty("margin-left",n-1+"px","important"),e--}}fixAllPositions(t){document.querySelectorAll("."+this.classNameButton).length>0&&document.querySelectorAll("."+this.classNameButton).forEach(e=>{if(e!==t&&this.elementsCollide(e,t)){let n=50;for(;n>0&&this.elementsCollide(e,t);){let e=t.style.marginLeft;e=""==e?0:parseInt(e),t.style.setProperty("margin-left",e+1+"px","important"),n--}this.fixAllPositions(t)}else;})}elementsCollide(t,e){let n=t.getBoundingClientRect(),r=e.getBoundingClientRect();return!(n.right<r.left||n.left>r.right||n.bottom<r.top||n.top>r.bottom)}bindClick(){document.addEventListener("click",t=>{let e=t.target.closest("."+this.classNameButton);if(null!==e){if(null!==e.closest("["+this.attrName+"]")){let t=e.closest("["+this.attrName+"]").getAttribute(this.attrName);if(t=this.decodeData(t),""!==t&&null!=t&&Array.isArray(t)&&t.length>0){this.closeContainer();let n="";n+='<div class="'+this.classNameContainer+'" data-key="'+e.closest("["+this.attrName+"]").getAttribute(this.attrNameKey)+'">',n+='<a class="'+this.classNameContainerClose+'" href="#"></a>',n+='<ul class="'+this.classNameContainerList+'">',t.forEach(t=>{var e,r,o;(n+='<li class="'+this.classNameContainerListitem+'" data-lng-source="'+t.lng_source+'" data-lng-target="'+t.lng_target+'" data-context="'+(null!==(e=t.context)&&void 0!==e?e:"")+'">',null!==t.context)&&(n+='<span class="'+this.classNameContainerListitemContext+'">'+(null!==(o=t.context)&&void 0!==o?o:"")+"</span>");n+='<textarea class="'+this.classNameContainerListitemTextarea+" "+this.classNameContainerListitemStr+'" readonly="readonly">'+t.str+"</textarea>",n+='<textarea class="'+this.classNameContainerListitemTextarea+" "+this.classNameContainerListitemTrans+'" data-context="'+(null!==(r=t.context)&&void 0!==r?r:"")+'">'+t.trans+"</textarea>",n+="</li>"}),n+="</ul>",n+='<input type="submit" class="'+this.classNameContainerSubmit+'" value="" />',n+="</div>",document.body.insertAdjacentHTML("beforeend",n);let r=document.querySelector("."+this.classNameContainer),o=e.getBoundingClientRect().left+document.documentElement.scrollLeft,i=e.getBoundingClientRect().top+document.documentElement.scrollTop;i+=e.offsetHeight,r.style.left=o+"px",r.style.top=i+"px",document.querySelectorAll("."+this.classNameContainerListitemTextarea).forEach(t=>{this.editor.init(t)})}}t.preventDefault()}})}bindClose(){document.addEventListener("click",t=>{null!==t.target.closest("."+this.classNameContainerClose)&&(this.closeContainer(),t.preventDefault())})}closeContainer(){null!==document.querySelector("."+this.classNameContainer)&&document.querySelector("."+this.classNameContainer).remove()}bindSave(){document.addEventListener("click",async t=>{let e=t.target.closest("."+this.classNameContainerSubmit);if(null!==e){let n=e.closest("."+this.classNameContainer),r=[];for(let t of n.querySelectorAll("."+this.classNameContainerListitem)){let e=[t.querySelector("."+this.classNameContainerListitemStr).value,t.getAttribute("data-context"),t.getAttribute("data-lng-source"),t.getAttribute("data-lng-target"),t.querySelector("."+this.classNameContainerListitemTrans).value];r=r.concat(this.saveTranslationLocal(...e)),await this.saveTranslationRemote(...e)}this.closeContainer(),this.reloadPage(r),t.preventDefault()}})}saveTranslationLocal(t,e,n,r,o){let i=[];return document.querySelectorAll("["+this.attrName+"]").forEach(s=>{let a=this.decodeData(s.getAttribute(this.attrName)),u=!1;""!==a&&null!=a&&Array.isArray(a)&&a.length>0&&a.forEach(a=>{var l;a.str===t&&(null!==(l=a.context)&&void 0!==l?l:"")===(null!=e?e:"")&&a.lng_source===n&&a.lng_target===r&&(a.trans=o,i.includes(s.getAttribute(this.attrNameKey))||i.push(s.getAttribute(this.attrNameKey)),u=!0)}),!0===u&&s.setAttribute(this.attrName,this.encodeData(a))}),i}saveTranslationRemote(t,e,n,r,o){return new Promise(i=>{let s=new URLSearchParams;s.append("str",t),s.append("context",e),s.append("lng_source",n),s.append("lng_target",r),s.append("trans",o);let a=window.location.href.split("#")[0];a+=(a.indexOf("?")>-1?"&":"?")+"gtbabel_frontend_editor_save=1",fetch(a,{method:"POST",body:s,cache:"no-cache"}).then(t=>t.json()).catch(t=>({success:!1,message:t})).then(t=>{i(t)})})}reloadPage(t){t.length>0&&fetch(window.location.href).then(t=>t.text()).catch(t=>t).then(e=>{let n=(new DOMParser).parseFromString(e,"text/html");t.forEach(t=>{let e=document.querySelector("["+this.attrNameKey+'="'+t+'"]'),r=n.querySelector("["+this.attrNameKey+'="'+t+'"]');if(null!==e&&null!==r){let t=this.dd.diff(e,r);this.dd.apply(e,t)}})})}encodeData(t){return s(u(t))}decodeData(t){return l(a(t))}}},{"./../wysiwygeditor/WysiwygEditor":3,"@babel/runtime/helpers/interopRequireDefault":4,"diff-dom":7,"locutus/php/url/base64_decode":9,"locutus/php/url/base64_encode":10,"locutus/php/var/serialize":11,"locutus/php/var/unserialize":12}],2:[function(t,e,n){"use strict";(new(t("@babel/runtime/helpers/interopRequireDefault")(t("./FrontendEditor")).default)).init()},{"./FrontendEditor":1,"@babel/runtime/helpers/interopRequireDefault":4}],3:[function(t,e,n){"use strict";var r=t("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(t("pell"));n.default=class{init(t){if(null!==t){let e=Array.from((new DOMParser).parseFromString(t.value,"text/html").body.childNodes).some(t=>1===t.nodeType),n=t.getAttribute("data-context");t.classList.add("gtbabel__wysiwyg-textarea"),t.setAttribute("spellcheck","false"),!1===e&&(t.style.display="block"),this.textareaAutoHeight(t);let r=document.createElement("div");if(r.setAttribute("class","gtbabel__wysiwyg gtbabel__wysiwyg--mode-"+(!0===e?"visual":"html")),t.parentNode.insertBefore(r,t.nextSibling),r.appendChild(t),!0===e&&r.insertAdjacentHTML("afterbegin",'\n                <div class="gtbabel__wysiwyg-buttons">\n                    <a class="gtbabel__wysiwyg-button gtbabel__wysiwyg-button--visual" href="#">Visuell</a>\n                    <a class="gtbabel__wysiwyg-button gtbabel__wysiwyg-button--html" href="#">HTML</a>\n                </div>\n            '),r.querySelectorAll(".gtbabel__wysiwyg-button").forEach(e=>{e.addEventListener("click",e=>{e.target.classList.contains("gtbabel__wysiwyg-button--html")&&r.classList.contains("gtbabel__wysiwyg--mode-visual")&&(r.classList.remove("gtbabel__wysiwyg--mode-visual"),r.classList.add("gtbabel__wysiwyg--mode-html"),this.textareaAutoHeight(t)),e.target.classList.contains("gtbabel__wysiwyg-button--visual")&&r.classList.contains("gtbabel__wysiwyg--mode-html")&&(r.classList.remove("gtbabel__wysiwyg--mode-html"),r.classList.add("gtbabel__wysiwyg--mode-visual")),e.preventDefault()})}),"slug"===n&&t.addEventListener("blur",()=>{t.value=this.slugify(t.value)}),!0===e){let e=document.createElement("div");e.setAttribute("class","gtbabel__wysiwyg-editor"),t.hasAttribute("readonly")&&e.classList.add("gtbabel__wysiwyg-editor--readonly"),r.appendChild(e);let n=o.default.init({element:e,onChange:e=>{e=e.replace(/^<div>/g,"").replace(/<\/div>$/g,"").replace(/<\/div>(\r\n|\r|\n)?<div.*?>/g,"<br/>").replace(/<div.*?>/g,"").replace(/<\/div>/g,""),t.value=e},defaultParagraphSeparator:"div",styleWithCSS:!1,actions:["bold","underline","italic","ulist","olist"]});t.hasAttribute("readonly")&&n.content.removeAttribute("contenteditable"),n.content.innerHTML="<div>"+t.value+"</div>",t.addEventListener("keyup",()=>{n.content.innerHTML="<div>"+t.value+"</div>"})}}}textareaAutoHeight(t){this.textareaSetHeight(t),t.addEventListener("keyup",t=>{this.textareaSetHeight(t.target)})}textareaSetHeight(t){t.style.height="5px",t.style.height=t.scrollHeight+"px"}slugify(t){return t.toString().toLowerCase().trim().split("ä").join("ae").split("ö").join("oe").split("ü").join("ue").split("ß").join("ss").replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}}},{"@babel/runtime/helpers/interopRequireDefault":4,pell:13}],4:[function(t,e,n){e.exports=function(t){return t&&t.__esModule?t:{default:t}}},{}],5:[function(t,e,n){"use strict";n.byteLength=function(t){var e=l(t),n=e[0],r=e[1];return 3*(n+r)/4-r},n.toByteArray=function(t){var e,n,r=l(t),s=r[0],a=r[1],u=new i(function(t,e,n){return 3*(e+n)/4-n}(0,s,a)),c=0,h=a>0?s-4:s;for(n=0;n<h;n+=4)e=o[t.charCodeAt(n)]<<18|o[t.charCodeAt(n+1)]<<12|o[t.charCodeAt(n+2)]<<6|o[t.charCodeAt(n+3)],u[c++]=e>>16&255,u[c++]=e>>8&255,u[c++]=255&e;2===a&&(e=o[t.charCodeAt(n)]<<2|o[t.charCodeAt(n+1)]>>4,u[c++]=255&e);1===a&&(e=o[t.charCodeAt(n)]<<10|o[t.charCodeAt(n+1)]<<4|o[t.charCodeAt(n+2)]>>2,u[c++]=e>>8&255,u[c++]=255&e);return u},n.fromByteArray=function(t){for(var e,n=t.length,o=n%3,i=[],s=0,a=n-o;s<a;s+=16383)i.push(c(t,s,s+16383>a?a:s+16383));1===o?(e=t[n-1],i.push(r[e>>2]+r[e<<4&63]+"==")):2===o&&(e=(t[n-2]<<8)+t[n-1],i.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"="));return i.join("")};for(var r=[],o=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,u=s.length;a<u;++a)r[a]=s[a],o[s.charCodeAt(a)]=a;function l(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function c(t,e,n){for(var o,i,s=[],a=e;a<n;a+=3)o=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),s.push(r[(i=o)>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return s.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},{}],6:[function(t,e,n){(function(e){(function(){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
"use strict";var e=t("base64-js"),r=t("ieee754");n.Buffer=i,n.SlowBuffer=function(t){+t!=t&&(t=0);return i.alloc(+t)},n.INSPECT_MAX_BYTES=50;function o(t){if(t>2147483647)throw new RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return e.__proto__=i.prototype,e}function i(t,e,n){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return u(t)}return s(t,e,n)}function s(t,e,n){if("string"==typeof t)return function(t,e){"string"==typeof e&&""!==e||(e="utf8");if(!i.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var n=0|h(t,e),r=o(n),s=r.write(t,e);s!==n&&(r=r.slice(0,s));return r}(t,e);if(ArrayBuffer.isView(t))return l(t);if(null==t)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(M(t,ArrayBuffer)||t&&M(t.buffer,ArrayBuffer))return function(t,e,n){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;r=void 0===e&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,e):new Uint8Array(t,e,n);return r.__proto__=i.prototype,r}(t,e,n);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=t.valueOf&&t.valueOf();if(null!=r&&r!==t)return i.from(r,e,n);var s=function(t){if(i.isBuffer(t)){var e=0|c(t.length),n=o(e);return 0===n.length||t.copy(n,0,0,e),n}if(void 0!==t.length)return"number"!=typeof t.length||j(t.length)?o(0):l(t);if("Buffer"===t.type&&Array.isArray(t.data))return l(t.data)}(t);if(s)return s;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return i.from(t[Symbol.toPrimitive]("string"),e,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function a(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function u(t){return a(t),o(t<0?0:0|c(t))}function l(t){for(var e=t.length<0?0:0|c(t.length),n=o(e),r=0;r<e;r+=1)n[r]=255&t[r];return n}function c(t){if(t>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647..toString(16)+" bytes");return 0|t}function h(t,e){if(i.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||M(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var n=t.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;for(var o=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return D(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return R(t).length;default:if(o)return r?-1:D(t).length;e=(""+e).toLowerCase(),o=!0}}function f(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return x(this,e,n);case"utf8":case"utf-8":return E(this,e,n);case"ascii":return V(this,e,n);case"latin1":case"binary":return A(this,e,n);case"base64":return N(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function d(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function p(t,e,n,r,o){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),j(n=+n)&&(n=o?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(o)return-1;n=t.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof e&&(e=i.from(e,r)),i.isBuffer(e))return 0===e.length?-1:g(t,e,n,r,o);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):g(t,[e],n,r,o);throw new TypeError("val must be string, number or Buffer")}function g(t,e,n,r,o){var i,s=1,a=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,n/=2}function l(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(o){var c=-1;for(i=n;i<a;i++)if(l(t,i)===l(e,-1===c?0:i-c)){if(-1===c&&(c=i),i-c+1===u)return c*s}else-1!==c&&(i-=i-c),c=-1}else for(n+u>a&&(n=a-u),i=n;i>=0;i--){for(var h=!0,f=0;f<u;f++)if(l(t,i+f)!==l(e,f)){h=!1;break}if(h)return i}return-1}function m(t,e,n,r){n=Number(n)||0;var o=t.length-n;r?(r=Number(r))>o&&(r=o):r=o;var i=e.length;r>i/2&&(r=i/2);for(var s=0;s<r;++s){var a=parseInt(e.substr(2*s,2),16);if(j(a))return s;t[n+s]=a}return s}function y(t,e,n,r){return U(D(e,t.length-n),t,n,r)}function b(t,e,n,r){return U(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function v(t,e,n,r){return b(t,e,n,r)}function w(t,e,n,r){return U(R(e),t,n,r)}function _(t,e,n,r){return U(function(t,e){for(var n,r,o,i=[],s=0;s<t.length&&!((e-=2)<0);++s)n=t.charCodeAt(s),r=n>>8,o=n%256,i.push(o),i.push(r);return i}(e,t.length-n),t,n,r)}function N(t,n,r){return 0===n&&r===t.length?e.fromByteArray(t):e.fromByteArray(t.slice(n,r))}function E(t,e,n){n=Math.min(t.length,n);for(var r=[],o=e;o<n;){var i,s,a,u,l=t[o],c=null,h=l>239?4:l>223?3:l>191?2:1;if(o+h<=n)switch(h){case 1:l<128&&(c=l);break;case 2:128==(192&(i=t[o+1]))&&(u=(31&l)<<6|63&i)>127&&(c=u);break;case 3:i=t[o+1],s=t[o+2],128==(192&i)&&128==(192&s)&&(u=(15&l)<<12|(63&i)<<6|63&s)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:i=t[o+1],s=t[o+2],a=t[o+3],128==(192&i)&&128==(192&s)&&128==(192&a)&&(u=(15&l)<<18|(63&i)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(c=u)}null===c?(c=65533,h=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),o+=h}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=4096));return n}(r)}n.kMaxLength=2147483647,i.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()}catch(t){return!1}}(),i.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(i.prototype,"parent",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.buffer}}),Object.defineProperty(i.prototype,"offset",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&i[Symbol.species]===i&&Object.defineProperty(i,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),i.poolSize=8192,i.from=function(t,e,n){return s(t,e,n)},i.prototype.__proto__=Uint8Array.prototype,i.__proto__=Uint8Array,i.alloc=function(t,e,n){return function(t,e,n){return a(t),t<=0?o(t):void 0!==e?"string"==typeof n?o(t).fill(e,n):o(t).fill(e):o(t)}(t,e,n)},i.allocUnsafe=function(t){return u(t)},i.allocUnsafeSlow=function(t){return u(t)},i.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==i.prototype},i.compare=function(t,e){if(M(t,Uint8Array)&&(t=i.from(t,t.offset,t.byteLength)),M(e,Uint8Array)&&(e=i.from(e,e.offset,e.byteLength)),!i.isBuffer(t)||!i.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;for(var n=t.length,r=e.length,o=0,s=Math.min(n,r);o<s;++o)if(t[o]!==e[o]){n=t[o],r=e[o];break}return n<r?-1:r<n?1:0},i.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return i.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=i.allocUnsafe(e),o=0;for(n=0;n<t.length;++n){var s=t[n];if(M(s,Uint8Array)&&(s=i.from(s)),!i.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,o),o+=s.length}return r},i.byteLength=h,i.prototype._isBuffer=!0,i.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)d(this,e,e+1);return this},i.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)d(this,e,e+3),d(this,e+1,e+2);return this},i.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)d(this,e,e+7),d(this,e+1,e+6),d(this,e+2,e+5),d(this,e+3,e+4);return this},i.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?E(this,0,t):f.apply(this,arguments)},i.prototype.toLocaleString=i.prototype.toString,i.prototype.equals=function(t){if(!i.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===i.compare(this,t)},i.prototype.inspect=function(){var t="",e=n.INSPECT_MAX_BYTES;return t=this.toString("hex",0,e).replace(/(.{2})/g,"$1 ").trim(),this.length>e&&(t+=" ... "),"<Buffer "+t+">"},i.prototype.compare=function(t,e,n,r,o){if(M(t,Uint8Array)&&(t=i.from(t,t.offset,t.byteLength)),!i.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),e<0||n>t.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&e>=n)return 0;if(r>=o)return-1;if(e>=n)return 1;if(this===t)return 0;for(var s=(o>>>=0)-(r>>>=0),a=(n>>>=0)-(e>>>=0),u=Math.min(s,a),l=this.slice(r,o),c=t.slice(e,n),h=0;h<u;++h)if(l[h]!==c[h]){s=l[h],a=c[h];break}return s<a?-1:a<s?1:0},i.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},i.prototype.indexOf=function(t,e,n){return p(this,t,e,n,!0)},i.prototype.lastIndexOf=function(t,e,n){return p(this,t,e,n,!1)},i.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-e;if((void 0===n||n>o)&&(n=o),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return m(this,t,e,n);case"utf8":case"utf-8":return y(this,t,e,n);case"ascii":return b(this,t,e,n);case"latin1":case"binary":return v(this,t,e,n);case"base64":return w(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,t,e,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function V(t,e,n){var r="";n=Math.min(t.length,n);for(var o=e;o<n;++o)r+=String.fromCharCode(127&t[o]);return r}function A(t,e,n){var r="";n=Math.min(t.length,n);for(var o=e;o<n;++o)r+=String.fromCharCode(t[o]);return r}function x(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var o="",i=e;i<n;++i)o+=I(t[i]);return o}function C(t,e,n){for(var r=t.slice(e,n),o="",i=0;i<r.length;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function k(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function S(t,e,n,r,o,s){if(!i.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<s)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function T(t,e,n,r,o,i){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function L(t,e,n,o,i){return e=+e,n>>>=0,i||T(t,0,n,4),r.write(t,e,n,o,23,4),n+4}function B(t,e,n,o,i){return e=+e,n>>>=0,i||T(t,0,n,8),r.write(t,e,n,o,52,8),n+8}i.prototype.slice=function(t,e){var n=this.length;(t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t);var r=this.subarray(t,e);return r.__proto__=i.prototype,r},i.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||k(t,e,this.length);for(var r=this[t],o=1,i=0;++i<e&&(o*=256);)r+=this[t+i]*o;return r},i.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||k(t,e,this.length);for(var r=this[t+--e],o=1;e>0&&(o*=256);)r+=this[t+--e]*o;return r},i.prototype.readUInt8=function(t,e){return t>>>=0,e||k(t,1,this.length),this[t]},i.prototype.readUInt16LE=function(t,e){return t>>>=0,e||k(t,2,this.length),this[t]|this[t+1]<<8},i.prototype.readUInt16BE=function(t,e){return t>>>=0,e||k(t,2,this.length),this[t]<<8|this[t+1]},i.prototype.readUInt32LE=function(t,e){return t>>>=0,e||k(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},i.prototype.readUInt32BE=function(t,e){return t>>>=0,e||k(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},i.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||k(t,e,this.length);for(var r=this[t],o=1,i=0;++i<e&&(o*=256);)r+=this[t+i]*o;return r>=(o*=128)&&(r-=Math.pow(2,8*e)),r},i.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||k(t,e,this.length);for(var r=e,o=1,i=this[t+--r];r>0&&(o*=256);)i+=this[t+--r]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*e)),i},i.prototype.readInt8=function(t,e){return t>>>=0,e||k(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},i.prototype.readInt16LE=function(t,e){t>>>=0,e||k(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},i.prototype.readInt16BE=function(t,e){t>>>=0,e||k(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},i.prototype.readInt32LE=function(t,e){return t>>>=0,e||k(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},i.prototype.readInt32BE=function(t,e){return t>>>=0,e||k(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},i.prototype.readFloatLE=function(t,e){return t>>>=0,e||k(t,4,this.length),r.read(this,t,!0,23,4)},i.prototype.readFloatBE=function(t,e){return t>>>=0,e||k(t,4,this.length),r.read(this,t,!1,23,4)},i.prototype.readDoubleLE=function(t,e){return t>>>=0,e||k(t,8,this.length),r.read(this,t,!0,52,8)},i.prototype.readDoubleBE=function(t,e){return t>>>=0,e||k(t,8,this.length),r.read(this,t,!1,52,8)},i.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e>>>=0,n>>>=0,r)||S(this,t,e,n,Math.pow(2,8*n)-1,0);var o=1,i=0;for(this[e]=255&t;++i<n&&(o*=256);)this[e+i]=t/o&255;return e+n},i.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e>>>=0,n>>>=0,r)||S(this,t,e,n,Math.pow(2,8*n)-1,0);var o=n-1,i=1;for(this[e+o]=255&t;--o>=0&&(i*=256);)this[e+o]=t/i&255;return e+n},i.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||S(this,t,e,1,255,0),this[e]=255&t,e+1},i.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||S(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},i.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||S(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},i.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||S(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},i.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||S(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},i.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e>>>=0,!r){var o=Math.pow(2,8*n-1);S(this,t,e,n,o-1,-o)}var i=0,s=1,a=0;for(this[e]=255&t;++i<n&&(s*=256);)t<0&&0===a&&0!==this[e+i-1]&&(a=1),this[e+i]=(t/s>>0)-a&255;return e+n},i.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e>>>=0,!r){var o=Math.pow(2,8*n-1);S(this,t,e,n,o-1,-o)}var i=n-1,s=1,a=0;for(this[e+i]=255&t;--i>=0&&(s*=256);)t<0&&0===a&&0!==this[e+i+1]&&(a=1),this[e+i]=(t/s>>0)-a&255;return e+n},i.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||S(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},i.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||S(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},i.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||S(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},i.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||S(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},i.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||S(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},i.prototype.writeFloatLE=function(t,e,n){return L(this,t,e,!0,n)},i.prototype.writeFloatBE=function(t,e,n){return L(this,t,e,!1,n)},i.prototype.writeDoubleLE=function(t,e,n){return B(this,t,e,!0,n)},i.prototype.writeDoubleBE=function(t,e,n){return B(this,t,e,!1,n)},i.prototype.copy=function(t,e,n,r){if(!i.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var o=r-n;if(this===t&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(e,n,r);else if(this===t&&n<e&&e<r)for(var s=o-1;s>=0;--s)t[s+e]=this[s+n];else Uint8Array.prototype.set.call(t,this.subarray(n,r),e);return o},i.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!i.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===t.length){var o=t.charCodeAt(0);("utf8"===r&&o<128||"latin1"===r)&&(t=o)}}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var s;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(s=e;s<n;++s)this[s]=t;else{var a=i.isBuffer(t)?t:i.from(t,r),u=a.length;if(0===u)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(s=0;s<n-e;++s)this[s+e]=a[s%u]}return this};var O=/[^+/0-9A-Za-z-_]/g;function I(t){return t<16?"0"+t.toString(16):t.toString(16)}function D(t,e){var n;e=e||1/0;for(var r=t.length,o=null,i=[],s=0;s<r;++s){if((n=t.charCodeAt(s))>55295&&n<57344){if(!o){if(n>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(e-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(e-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((e-=1)<0)break;i.push(n)}else if(n<2048){if((e-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function R(t){return e.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(O,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function U(t,e,n,r){for(var o=0;o<r&&!(o+n>=e.length||o>=t.length);++o)e[o+n]=t[o];return o}function M(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function j(t){return t!=t}}).call(this)}).call(this,t("buffer").Buffer)},{"base64-js":5,buffer:6,ieee754:8}],7:[function(t,e,n){"use strict";function r(t,e,n){var o;return"#text"===t.nodeName?o=n.document.createTextNode(t.data):"#comment"===t.nodeName?o=n.document.createComment(t.data):(e?o=n.document.createElementNS("http://www.w3.org/2000/svg",t.nodeName):"svg"===t.nodeName.toLowerCase()?(o=n.document.createElementNS("http://www.w3.org/2000/svg","svg"),e=!0):o=n.document.createElement(t.nodeName),t.attributes&&Object.entries(t.attributes).forEach((function(t){var e=t[0],n=t[1];return o.setAttribute(e,n)})),t.childNodes&&t.childNodes.forEach((function(t){return o.appendChild(r(t,e,n))})),n.valueDiffing&&(t.value&&(o.value=t.value),t.checked&&(o.checked=t.checked),t.selected&&(o.selected=t.selected))),o}function o(t,e){for(e=e.slice();e.length>0;){if(!t.childNodes)return!1;var n=e.splice(0,1)[0];t=t.childNodes[n]}return t}function i(t,e,n){var i,s,a,u,l=o(t,e[n._const.route]),c={diff:e,node:l};if(n.preDiffApply(c))return!0;switch(e[n._const.action]){case n._const.addAttribute:if(!l||!l.setAttribute)return!1;l.setAttribute(e[n._const.name],e[n._const.value]);break;case n._const.modifyAttribute:if(!l||!l.setAttribute)return!1;l.setAttribute(e[n._const.name],e[n._const.newValue]),"INPUT"===l.nodeName&&"value"===e[n._const.name]&&(l.value=e[n._const.newValue]);break;case n._const.removeAttribute:if(!l||!l.removeAttribute)return!1;l.removeAttribute(e[n._const.name]);break;case n._const.modifyTextElement:if(!l||3!==l.nodeType)return!1;n.textDiff(l,l.data,e[n._const.oldValue],e[n._const.newValue]);break;case n._const.modifyValue:if(!l||void 0===l.value)return!1;l.value=e[n._const.newValue];break;case n._const.modifyComment:if(!l||void 0===l.data)return!1;n.textDiff(l,l.data,e[n._const.oldValue],e[n._const.newValue]);break;case n._const.modifyChecked:if(!l||void 0===l.checked)return!1;l.checked=e[n._const.newValue];break;case n._const.modifySelected:if(!l||void 0===l.selected)return!1;l.selected=e[n._const.newValue];break;case n._const.replaceElement:l.parentNode.replaceChild(r(e[n._const.newValue],"http://www.w3.org/2000/svg"===l.namespaceURI,n),l);break;case n._const.relocateGroup:Array.apply(void 0,new Array(e.groupLength)).map((function(){return l.removeChild(l.childNodes[e[n._const.from]])})).forEach((function(t,r){0===r&&(s=l.childNodes[e[n._const.to]]),l.insertBefore(t,s||null)}));break;case n._const.removeElement:l.parentNode.removeChild(l);break;case n._const.addElement:u=(a=e[n._const.route].slice()).splice(a.length-1,1)[0],(l=o(t,a)).insertBefore(r(e[n._const.element],"http://www.w3.org/2000/svg"===l.namespaceURI,n),l.childNodes[u]||null);break;case n._const.removeTextElement:if(!l||3!==l.nodeType)return!1;l.parentNode.removeChild(l);break;case n._const.addTextElement:if(u=(a=e[n._const.route].slice()).splice(a.length-1,1)[0],i=n.document.createTextNode(e[n._const.value]),!(l=o(t,a))||!l.childNodes)return!1;l.insertBefore(i,l.childNodes[u]||null);break;default:console.log("unknown action")}return c.newNode=i,n.postDiffApply(c),!0}function s(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}Object.defineProperty(n,"__esModule",{value:!0});var a=function(t){var e=this;void 0===t&&(t={}),Object.entries(t).forEach((function(t){var n=t[0],r=t[1];return e[n]=r}))};function u(t){var e=[];return e.push(t.nodeName),"#text"!==t.nodeName&&"#comment"!==t.nodeName&&t.attributes&&(t.attributes.class&&e.push(t.nodeName+"."+t.attributes.class.replace(/ /g,".")),t.attributes.id&&e.push(t.nodeName+"#"+t.attributes.id)),e}function l(t){var e={},n={};return t.forEach((function(t){u(t).forEach((function(t){var r=t in e;r||t in n?r&&(delete e[t],n[t]=!0):e[t]=!0}))})),e}function c(t,e){var n=l(t),r=l(e),o={};return Object.keys(n).forEach((function(t){r[t]&&(o[t]=!0)})),o}function h(t){return delete t.outerDone,delete t.innerDone,delete t.valueDone,!t.childNodes||t.childNodes.every(h)}function f(t,e){if(!["nodeName","value","checked","selected","data"].every((function(n){return t[n]===e[n]})))return!1;if(Boolean(t.attributes)!==Boolean(e.attributes))return!1;if(Boolean(t.childNodes)!==Boolean(e.childNodes))return!1;if(t.attributes){var n=Object.keys(t.attributes),r=Object.keys(e.attributes);if(n.length!==r.length)return!1;if(!n.every((function(n){return t.attributes[n]===e.attributes[n]})))return!1}if(t.childNodes){if(t.childNodes.length!==e.childNodes.length)return!1;if(!t.childNodes.every((function(t,n){return f(t,e.childNodes[n])})))return!1}return!0}function d(t,e,n,r,o){if(!t||!e)return!1;if(t.nodeName!==e.nodeName)return!1;if("#text"===t.nodeName)return!!o||t.data===e.data;if(t.nodeName in n)return!0;if(t.attributes&&e.attributes){if(t.attributes.id){if(t.attributes.id!==e.attributes.id)return!1;if(t.nodeName+"#"+t.attributes.id in n)return!0}if(t.attributes.class&&t.attributes.class===e.attributes.class&&t.nodeName+"."+t.attributes.class.replace(/ /g,".")in n)return!0}if(r)return!0;var i=t.childNodes?t.childNodes.slice().reverse():[],s=e.childNodes?e.childNodes.slice().reverse():[];if(i.length!==s.length)return!1;if(o)return i.every((function(t,e){return t.nodeName===s[e].nodeName}));var a=c(i,s);return i.every((function(t,e){return d(t,s[e],a,!0,!0)}))}function p(t){return JSON.parse(JSON.stringify(t))}function g(t,e,n,r){var o=0,i=[],s=t.length,a=e.length,l=Array.apply(void 0,new Array(s+1)).map((function(){return[]})),h=c(t,e),f=s===a;f&&t.some((function(t,n){var r=u(t),o=u(e[n]);return r.length!==o.length?(f=!1,!0):(r.some((function(t,e){if(t!==o[e])return f=!1,!0})),!f||void 0)}));for(var p=0;p<s;p++)for(var g=t[p],m=0;m<a;m++){var y=e[m];n[p]||r[m]||!d(g,y,h,f)?l[p+1][m+1]=0:(l[p+1][m+1]=l[p][m]?l[p][m]+1:1,l[p+1][m+1]>=o&&(o=l[p+1][m+1],i=[p+1,m+1]))}return 0!==o&&{oldValue:i[0]-o,newValue:i[1]-o,length:o}}function m(t,e){return Array.apply(void 0,new Array(t)).map((function(){return e}))}a.prototype.toString=function(){return JSON.stringify(this)},a.prototype.setValue=function(t,e){return this[t]=e,this};var y=function(){this.list=[]};function b(t,e){var n,r,o=t;for(e=e.slice();e.length>0;){if(!o.childNodes)return!1;r=e.splice(0,1)[0],n=o,o=o.childNodes[r]}return{node:o,parentNode:n,nodeIndex:r}}function v(t,e,n){return e.forEach((function(e){!function(t,e,n){var r,o,i,s=b(t,e[n._const.route]),a=s.node,u=s.parentNode,l=s.nodeIndex,c=[],h={diff:e,node:a};if(n.preVirtualDiffApply(h))return!0;switch(e[n._const.action]){case n._const.addAttribute:a.attributes||(a.attributes={}),a.attributes[e[n._const.name]]=e[n._const.value],"checked"===e[n._const.name]?a.checked=!0:"selected"===e[n._const.name]?a.selected=!0:"INPUT"===a.nodeName&&"value"===e[n._const.name]&&(a.value=e[n._const.value]);break;case n._const.modifyAttribute:a.attributes[e[n._const.name]]=e[n._const.newValue];break;case n._const.removeAttribute:delete a.attributes[e[n._const.name]],0===Object.keys(a.attributes).length&&delete a.attributes,"checked"===e[n._const.name]?a.checked=!1:"selected"===e[n._const.name]?delete a.selected:"INPUT"===a.nodeName&&"value"===e[n._const.name]&&delete a.value;break;case n._const.modifyTextElement:a.data=e[n._const.newValue];break;case n._const.modifyValue:a.value=e[n._const.newValue];break;case n._const.modifyComment:a.data=e[n._const.newValue];break;case n._const.modifyChecked:a.checked=e[n._const.newValue];break;case n._const.modifySelected:a.selected=e[n._const.newValue];break;case n._const.replaceElement:(r=p(e[n._const.newValue])).outerDone=!0,r.innerDone=!0,r.valueDone=!0,u.childNodes[l]=r;break;case n._const.relocateGroup:a.childNodes.splice(e[n._const.from],e.groupLength).reverse().forEach((function(t){return a.childNodes.splice(e[n._const.to],0,t)})),a.subsets&&a.subsets.forEach((function(t){if(e[n._const.from]<e[n._const.to]&&t.oldValue<=e[n._const.to]&&t.oldValue>e[n._const.from]){t.oldValue-=e.groupLength;var r=t.oldValue+t.length-e[n._const.to];r>0&&(c.push({oldValue:e[n._const.to]+e.groupLength,newValue:t.newValue+t.length-r,length:r}),t.length-=r)}else if(e[n._const.from]>e[n._const.to]&&t.oldValue>e[n._const.to]&&t.oldValue<e[n._const.from]){t.oldValue+=e.groupLength;var o=t.oldValue+t.length-e[n._const.to];o>0&&(c.push({oldValue:e[n._const.to]+e.groupLength,newValue:t.newValue+t.length-o,length:o}),t.length-=o)}else t.oldValue===e[n._const.from]&&(t.oldValue=e[n._const.to])}));break;case n._const.removeElement:u.childNodes.splice(l,1),u.subsets&&u.subsets.forEach((function(t){t.oldValue>l?t.oldValue-=1:t.oldValue===l?t.delete=!0:t.oldValue<l&&t.oldValue+t.length>l&&(t.oldValue+t.length-1===l?t.length--:(c.push({newValue:t.newValue+l-t.oldValue,oldValue:l,length:t.length-l+t.oldValue-1}),t.length=l-t.oldValue))})),a=u;break;case n._const.addElement:o=e[n._const.route].slice(),i=o.splice(o.length-1,1)[0],a=b(t,o).node,(r=p(e[n._const.element])).outerDone=!0,r.innerDone=!0,r.valueDone=!0,a.childNodes||(a.childNodes=[]),i>=a.childNodes.length?a.childNodes.push(r):a.childNodes.splice(i,0,r),a.subsets&&a.subsets.forEach((function(t){if(t.oldValue>=i)t.oldValue+=1;else if(t.oldValue<i&&t.oldValue+t.length>i){var e=t.oldValue+t.length-i;c.push({newValue:t.newValue+t.length-e,oldValue:i+1,length:e}),t.length-=e}}));break;case n._const.removeTextElement:u.childNodes.splice(l,1),"TEXTAREA"===u.nodeName&&delete u.value,u.subsets&&u.subsets.forEach((function(t){t.oldValue>l?t.oldValue-=1:t.oldValue===l?t.delete=!0:t.oldValue<l&&t.oldValue+t.length>l&&(t.oldValue+t.length-1===l?t.length--:(c.push({newValue:t.newValue+l-t.oldValue,oldValue:l,length:t.length-l+t.oldValue-1}),t.length=l-t.oldValue))})),a=u;break;case n._const.addTextElement:o=e[n._const.route].slice(),i=o.splice(o.length-1,1)[0],(r={}).nodeName="#text",r.data=e[n._const.value],(a=b(t,o).node).childNodes||(a.childNodes=[]),i>=a.childNodes.length?a.childNodes.push(r):a.childNodes.splice(i,0,r),"TEXTAREA"===a.nodeName&&(a.value=e[n._const.newValue]),a.subsets&&a.subsets.forEach((function(t){if(t.oldValue>=i&&(t.oldValue+=1),t.oldValue<i&&t.oldValue+t.length>i){var e=t.oldValue+t.length-i;c.push({newValue:t.newValue+t.length-e,oldValue:i+1,length:e}),t.length-=e}}));break;default:console.log("unknown action")}a.subsets&&(a.subsets=a.subsets.filter((function(t){return!t.delete&&t.oldValue!==t.newValue})),c.length&&(a.subsets=a.subsets.concat(c))),h.newNode=r,n.postVirtualDiffApply(h)}(t,e,n)})),!0}function w(t,e){void 0===e&&(e={});var n={};return n.nodeName=t.nodeName,"#text"===n.nodeName||"#comment"===n.nodeName?n.data=t.data:(t.attributes&&t.attributes.length>0&&(n.attributes={},Array.prototype.slice.call(t.attributes).forEach((function(t){return n.attributes[t.name]=t.value}))),"TEXTAREA"===n.nodeName?n.value=t.value:t.childNodes&&t.childNodes.length>0&&(n.childNodes=[],Array.prototype.slice.call(t.childNodes).forEach((function(t){return n.childNodes.push(w(t,e))}))),e.valueDiffing&&(void 0!==t.checked&&t.type&&["radio","checkbox"].includes(t.type.toLowerCase())?n.checked=t.checked:void 0!==t.value&&(n.value=t.value),void 0!==t.selected&&(n.selected=t.selected))),n}y.prototype.add=function(t){var e;(e=this.list).push.apply(e,t)},y.prototype.forEach=function(t){this.list.forEach((function(e){return t(e)}))};var _=/<(?:"[^"]*"['"]*|'[^']*'['"]*|[^'">])+>/g,N=Object.create?Object.create(null):{},E=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function V(t){return t.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")}var A={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,menuItem:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0};function x(t){var e={nodeName:"",attributes:{}},n=t.match(/<\/?([^\s]+?)[/\s>]/);if(n&&(e.nodeName=n[1].toUpperCase(),(A[n[1].toLowerCase()]||"/"===t.charAt(t.length-2))&&(e.voidElement=!0),e.nodeName.startsWith("!--"))){var r=t.indexOf("--\x3e");return{type:"comment",data:-1!==r?t.slice(4,r):""}}for(var o=new RegExp(E),i=null,s=!1;!s;)if(null===(i=o.exec(t)))s=!0;else if(i[0].trim())if(i[1]){var a=i[1].trim(),u=[a,""];a.indexOf("=")>-1&&(u=a.split("=")),e.attributes[u[0]]=u[1],o.lastIndex--}else i[2]&&(e.attributes[i[2]]=i[3].trim().substring(1,i[3].length-1));return e}function C(t){return function t(e){return delete e.voidElement,e.childNodes&&e.childNodes.forEach((function(e){return t(e)})),e}(function(t,e){void 0===e&&(e={components:N});var n,r=[],o=-1,i=[],s=!1;return t.replace(_,(function(a,u){if(s){if(a!=="</"+n.nodeName+">")return;s=!1}var l,c="/"!==a.charAt(1),h=a.startsWith("\x3c!--"),f=u+a.length,d=t.charAt(f);if(h){var p=x(a);return o<0?(r.push(p),r):((l=i[o])&&(l.childNodes||(l.childNodes=[]),l.childNodes.push(p)),r)}if(c&&(n=x(a),o++,"tag"===n.type&&e.components[n.nodeName]&&(n.type="component",s=!0),n.voidElement||s||!d||"<"===d||(n.childNodes||(n.childNodes=[]),n.childNodes.push({nodeName:"#text",data:V(t.slice(f,t.indexOf("<",f)))})),0===o&&r.push(n),(l=i[o-1])&&(l.childNodes||(l.childNodes=[]),l.childNodes.push(n)),i[o]=n),(!c||n.voidElement)&&(o--,!s&&"<"!==d&&d)){l=-1===o?r:i[o].childNodes||[];var g=t.indexOf("<",f),m=V(t.slice(f,-1===g?void 0:g));l.push({nodeName:"#text",data:m})}})),r[0]}(t))}var k=function(t,e,n){this.options=n,this.t1=t instanceof HTMLElement?w(t,this.options):"string"==typeof t?C(t,this.options):JSON.parse(JSON.stringify(t)),this.t2=e instanceof HTMLElement?w(e,this.options):"string"==typeof e?C(e,this.options):JSON.parse(JSON.stringify(e)),this.diffcount=0,this.foundAll=!1,this.debug&&(this.t1Orig=w(t,this.options),this.t2Orig=w(e,this.options)),this.tracker=new y};k.prototype.init=function(){return this.findDiffs(this.t1,this.t2)},k.prototype.findDiffs=function(t,e){var n;do{if(this.options.debug&&(this.diffcount+=1,this.diffcount>this.options.diffcap))throw window.diffError=[this.t1Orig,this.t2Orig],new Error("surpassed diffcap:"+JSON.stringify(this.t1Orig)+" -> "+JSON.stringify(this.t2Orig));0===(n=this.findNextDiff(t,e,[])).length&&(f(t,e)||(this.foundAll?console.error("Could not find remaining diffs!"):(this.foundAll=!0,h(t),n=this.findNextDiff(t,e,[])))),n.length>0&&(this.foundAll=!1,this.tracker.add(n),v(t,n,this.options))}while(n.length>0);return this.tracker.list},k.prototype.findNextDiff=function(t,e,n){var r,o;if(this.options.maxDepth&&n.length>this.options.maxDepth)return[];if(!t.outerDone){if(r=this.findOuterDiff(t,e,n),this.options.filterOuterDiff&&(o=this.options.filterOuterDiff(t,e,r))&&(r=o),r.length>0)return t.outerDone=!0,r;t.outerDone=!0}if(!t.innerDone){if((r=this.findInnerDiff(t,e,n)).length>0)return r;t.innerDone=!0}if(this.options.valueDiffing&&!t.valueDone){if((r=this.findValueDiff(t,e,n)).length>0)return t.valueDone=!0,r;t.valueDone=!0}return[]},k.prototype.findOuterDiff=function(t,e,n){var r,o,i,s,u,l,c=[];if(t.nodeName!==e.nodeName){if(!n.length)throw new Error("Top level nodes have to be of the same kind.");return[(new a).setValue(this.options._const.action,this.options._const.replaceElement).setValue(this.options._const.oldValue,p(t)).setValue(this.options._const.newValue,p(e)).setValue(this.options._const.route,n)]}if(n.length&&this.options.maxNodeDiffCount<Math.abs((t.childNodes||[]).length-(e.childNodes||[]).length))return[(new a).setValue(this.options._const.action,this.options._const.replaceElement).setValue(this.options._const.oldValue,p(t)).setValue(this.options._const.newValue,p(e)).setValue(this.options._const.route,n)];if(t.data!==e.data)return"#text"===t.nodeName?[(new a).setValue(this.options._const.action,this.options._const.modifyTextElement).setValue(this.options._const.route,n).setValue(this.options._const.oldValue,t.data).setValue(this.options._const.newValue,e.data)]:[(new a).setValue(this.options._const.action,this.options._const.modifyComment).setValue(this.options._const.route,n).setValue(this.options._const.oldValue,t.data).setValue(this.options._const.newValue,e.data)];for(o=t.attributes?Object.keys(t.attributes).sort():[],i=e.attributes?Object.keys(e.attributes).sort():[],s=o.length,l=0;l<s;l++)r=o[l],-1===(u=i.indexOf(r))?c.push((new a).setValue(this.options._const.action,this.options._const.removeAttribute).setValue(this.options._const.route,n).setValue(this.options._const.name,r).setValue(this.options._const.value,t.attributes[r])):(i.splice(u,1),t.attributes[r]!==e.attributes[r]&&c.push((new a).setValue(this.options._const.action,this.options._const.modifyAttribute).setValue(this.options._const.route,n).setValue(this.options._const.name,r).setValue(this.options._const.oldValue,t.attributes[r]).setValue(this.options._const.newValue,e.attributes[r])));for(s=i.length,l=0;l<s;l++)r=i[l],c.push((new a).setValue(this.options._const.action,this.options._const.addAttribute).setValue(this.options._const.route,n).setValue(this.options._const.name,r).setValue(this.options._const.value,e.attributes[r]));return c},k.prototype.findInnerDiff=function(t,e,n){var r=t.childNodes?t.childNodes.slice():[],o=e.childNodes?e.childNodes.slice():[],i=Math.max(r.length,o.length),s=Math.abs(r.length-o.length),u=[],l=0;if(!this.options.maxChildCount||i<this.options.maxChildCount){var c=t.subsets&&t.subsetsAge--?t.subsets:t.childNodes&&e.childNodes?function(t,e){for(var n=t.childNodes?t.childNodes:[],r=e.childNodes?e.childNodes:[],o=m(n.length,!1),i=m(r.length,!1),s=[],a=!0,u=function(){return arguments[1]};a;)(a=g(n,r,o,i))&&(s.push(a),Array.apply(void 0,new Array(a.length)).map(u).forEach((function(t){return e=t,o[a.oldValue+e]=!0,void(i[a.newValue+e]=!0);var e})));return t.subsets=s,t.subsetsAge=100,s}(t,e):[];if(c.length>0&&(u=this.attemptGroupRelocation(t,e,c,n)).length>0)return u}for(var h=0;h<i;h+=1){var d=r[h],y=o[h];s&&(d&&!y?"#text"===d.nodeName?(u.push((new a).setValue(this.options._const.action,this.options._const.removeTextElement).setValue(this.options._const.route,n.concat(l)).setValue(this.options._const.value,d.data)),l-=1):(u.push((new a).setValue(this.options._const.action,this.options._const.removeElement).setValue(this.options._const.route,n.concat(l)).setValue(this.options._const.element,p(d))),l-=1):y&&!d&&("#text"===y.nodeName?u.push((new a).setValue(this.options._const.action,this.options._const.addTextElement).setValue(this.options._const.route,n.concat(l)).setValue(this.options._const.value,y.data)):u.push((new a).setValue(this.options._const.action,this.options._const.addElement).setValue(this.options._const.route,n.concat(l)).setValue(this.options._const.element,p(y))))),d&&y&&(!this.options.maxChildCount||i<this.options.maxChildCount?u=u.concat(this.findNextDiff(d,y,n.concat(l))):f(d,y)||(r.length>o.length?("#text"===d.nodeName?u.push((new a).setValue(this.options._const.action,this.options._const.removeTextElement).setValue(this.options._const.route,n.concat(l)).setValue(this.options._const.value,d.data)):u.push((new a).setValue(this.options._const.action,this.options._const.removeElement).setValue(this.options._const.element,p(d)).setValue(this.options._const.route,n.concat(l))),r.splice(h,1),h-=1,l-=1,s-=1):r.length<o.length?(u=u.concat([(new a).setValue(this.options._const.action,this.options._const.addElement).setValue(this.options._const.element,p(y)).setValue(this.options._const.route,n.concat(l))]),r.splice(h,0,{}),s-=1):u=u.concat([(new a).setValue(this.options._const.action,this.options._const.replaceElement).setValue(this.options._const.oldValue,p(d)).setValue(this.options._const.newValue,p(y)).setValue(this.options._const.route,n.concat(l))]))),l+=1}return t.innerDone=!0,u},k.prototype.attemptGroupRelocation=function(t,e,n,r){for(var o,i,s,u,l,c,h=function(t,e,n){var r=t.childNodes?m(t.childNodes.length,!0):[],o=e.childNodes?m(e.childNodes.length,!0):[],i=0;return n.forEach((function(t){for(var e=t.oldValue+t.length,n=t.newValue+t.length,s=t.oldValue;s<e;s+=1)r[s]=i;for(var a=t.newValue;a<n;a+=1)o[a]=i;i+=1})),{gaps1:r,gaps2:o}}(t,e,n),f=h.gaps1,g=h.gaps2,y=Math.min(f.length,g.length),b=[],v=0,w=0;v<y;w+=1,v+=1)if(!0===f[v])if("#text"===(u=t.childNodes[w]).nodeName)if("#text"===e.childNodes[v].nodeName){if(u.data!==e.childNodes[v].data){for(c=w;t.childNodes.length>c+1&&"#text"===t.childNodes[c+1].nodeName;)if(c+=1,e.childNodes[v].data===t.childNodes[c].data){l=!0;break}if(!l)return b.push((new a).setValue(this.options._const.action,this.options._const.modifyTextElement).setValue(this.options._const.route,r.concat(v)).setValue(this.options._const.oldValue,u.data).setValue(this.options._const.newValue,e.childNodes[v].data)),b}}else b.push((new a).setValue(this.options._const.action,this.options._const.removeTextElement).setValue(this.options._const.route,r.concat(v)).setValue(this.options._const.value,u.data)),f.splice(v,1),y=Math.min(f.length,g.length),v-=1;else b.push((new a).setValue(this.options._const.action,this.options._const.removeElement).setValue(this.options._const.route,r.concat(v)).setValue(this.options._const.element,p(u))),f.splice(v,1),y=Math.min(f.length,g.length),v-=1;else if(!0===g[v])"#text"===(u=e.childNodes[v]).nodeName?(b.push((new a).setValue(this.options._const.action,this.options._const.addTextElement).setValue(this.options._const.route,r.concat(v)).setValue(this.options._const.value,u.data)),f.splice(v,0,!0),y=Math.min(f.length,g.length),w-=1):(b.push((new a).setValue(this.options._const.action,this.options._const.addElement).setValue(this.options._const.route,r.concat(v)).setValue(this.options._const.element,p(u))),f.splice(v,0,!0),y=Math.min(f.length,g.length),w-=1);else if(f[v]!==g[v]){if(b.length>0)return b;if(s=n[f[v]],(i=Math.min(s.newValue,t.childNodes.length-s.length))!==s.oldValue){o=!1;for(var _=0;_<s.length;_+=1)d(t.childNodes[i+_],t.childNodes[s.oldValue+_],[],!1,!0)||(o=!0);if(o)return[(new a).setValue(this.options._const.action,this.options._const.relocateGroup).setValue("groupLength",s.length).setValue(this.options._const.from,s.oldValue).setValue(this.options._const.to,i).setValue(this.options._const.route,r)]}}return b},k.prototype.findValueDiff=function(t,e,n){var r=[];return t.selected!==e.selected&&r.push((new a).setValue(this.options._const.action,this.options._const.modifySelected).setValue(this.options._const.oldValue,t.selected).setValue(this.options._const.newValue,e.selected).setValue(this.options._const.route,n)),(t.value||e.value)&&t.value!==e.value&&"OPTION"!==t.nodeName&&r.push((new a).setValue(this.options._const.action,this.options._const.modifyValue).setValue(this.options._const.oldValue,t.value||"").setValue(this.options._const.newValue,e.value||"").setValue(this.options._const.route,n)),t.checked!==e.checked&&r.push((new a).setValue(this.options._const.action,this.options._const.modifyChecked).setValue(this.options._const.oldValue,t.checked).setValue(this.options._const.newValue,e.checked).setValue(this.options._const.route,n)),r};var S={debug:!1,diffcap:10,maxDepth:!1,maxChildCount:50,valueDiffing:!0,textDiff:function(t,e,n,r){t.data=r},preVirtualDiffApply:function(){},postVirtualDiffApply:function(){},preDiffApply:function(){},postDiffApply:function(){},filterOuterDiff:null,compress:!1,_const:!1,document:!(!window||!window.document)&&window.document},T=function(t){var e=this;if(void 0===t&&(t={}),this.options=t,Object.entries(S).forEach((function(t){var n=t[0],r=t[1];Object.prototype.hasOwnProperty.call(e.options,n)||(e.options[n]=r)})),!this.options._const){var n=["addAttribute","modifyAttribute","removeAttribute","modifyTextElement","relocateGroup","removeElement","addElement","removeTextElement","addTextElement","replaceElement","modifyValue","modifyChecked","modifySelected","modifyComment","action","route","oldValue","newValue","element","group","from","to","name","value","data","attributes","nodeName","childNodes","checked","selected"];this.options._const={},this.options.compress?n.forEach((function(t,n){return e.options._const[t]=n})):n.forEach((function(t){return e.options._const[t]=t}))}this.DiffFinder=k};T.prototype.apply=function(t,e){return function(t,e,n){return e.every((function(e){return i(t,e,n)}))}(t,e,this.options)},T.prototype.undo=function(t,e){return function(t,e,n){e.length||(e=[e]),(e=e.slice()).reverse(),e.forEach((function(e){!function(t,e,n){switch(e[n._const.action]){case n._const.addAttribute:e[n._const.action]=n._const.removeAttribute,i(t,e,n);break;case n._const.modifyAttribute:s(e,n._const.oldValue,n._const.newValue),i(t,e,n);break;case n._const.removeAttribute:e[n._const.action]=n._const.addAttribute,i(t,e,n);break;case n._const.modifyTextElement:case n._const.modifyValue:case n._const.modifyComment:case n._const.modifyChecked:case n._const.modifySelected:case n._const.replaceElement:s(e,n._const.oldValue,n._const.newValue),i(t,e,n);break;case n._const.relocateGroup:s(e,n._const.from,n._const.to),i(t,e,n);break;case n._const.removeElement:e[n._const.action]=n._const.addElement,i(t,e,n);break;case n._const.addElement:e[n._const.action]=n._const.removeElement,i(t,e,n);break;case n._const.removeTextElement:e[n._const.action]=n._const.addTextElement,i(t,e,n);break;case n._const.addTextElement:e[n._const.action]=n._const.removeTextElement,i(t,e,n);break;default:console.log("unknown action")}}(t,e,n)}))}(t,e,this.options)},T.prototype.diff=function(t,e){return new this.DiffFinder(t,e,this.options).init()};var L=function(t){var e=this;void 0===t&&(t={}),this.pad="│   ",this.padding="",this.tick=1,this.messages=[];var n=function(t,n){var r=t[n];t[n]=function(){for(var o=[],i=arguments.length;i--;)o[i]=arguments[i];e.fin(n,Array.prototype.slice.call(o));var s=r.apply(t,o);return e.fout(n,s),s}};for(var r in t)"function"==typeof t[r]&&n(t,r);this.log("┌ TRACELOG START")};L.prototype.fin=function(t,e){this.padding+=this.pad,this.log("├─> entering "+t,e)},L.prototype.fout=function(t,e){this.log("│<──┘ generated return value",e),this.padding=this.padding.substring(0,this.padding.length-this.pad.length)},L.prototype.format=function(t,e){return function(t){for(t=""+t;t.length<4;)t="0"+t;return t}(e)+"> "+this.padding+t},L.prototype.log=function(){var t=Array.prototype.slice.call(arguments),e=function(t){return t?"string"==typeof t?t:t instanceof HTMLElement?t.outerHTML||"<empty>":t instanceof Array?"["+t.map(e).join(",")+"]":t.toString()||t.valueOf()||"<unknown>":"<falsey>"};t=t.map(e).join(", "),this.messages.push(this.format(t,this.tick++))},L.prototype.toString=function(){for(var t="└───";t.length<=this.padding.length+this.pad.length;)t+="×   ";var e=this.padding;return this.padding="",t=this.format(t,this.tick),this.padding=e,this.messages.join("\n")+"\n"+t},n.DiffDOM=T,n.TraceLogger=L,n.nodeToObj=w,n.stringToObj=C},{}],8:[function(t,e,n){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
n.read=function(t,e,n,r,o){var i,s,a=8*o-r-1,u=(1<<a)-1,l=u>>1,c=-7,h=n?o-1:0,f=n?-1:1,d=t[e+h];for(h+=f,i=d&(1<<-c)-1,d>>=-c,c+=a;c>0;i=256*i+t[e+h],h+=f,c-=8);for(s=i&(1<<-c)-1,i>>=-c,c+=r;c>0;s=256*s+t[e+h],h+=f,c-=8);if(0===i)i=1-l;else{if(i===u)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,r),i-=l}return(d?-1:1)*s*Math.pow(2,i-r)},n.write=function(t,e,n,r,o,i){var s,a,u,l=8*i-o-1,c=(1<<l)-1,h=c>>1,f=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:i-1,p=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),(e+=s+h>=1?f/u:f*Math.pow(2,1-h))*u>=2&&(s++,u/=2),s+h>=c?(a=0,s=c):s+h>=1?(a=(e*u-1)*Math.pow(2,o),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,o),s=0));o>=8;t[n+d]=255&a,d+=p,a/=256,o-=8);for(s=s<<o|a,l+=o;l>0;t[n+d]=255&s,d+=p,s/=256,l-=8);t[n+d-p]|=128*g}},{}],9:[function(t,e,n){(function(t){(function(){"use strict";e.exports=function(e){var n=function(t){return decodeURIComponent(t.split("").map((function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)})).join(""))};if("undefined"==typeof window)return new t(e,"base64").toString("utf-8");if(void 0!==window.atob)return n(window.atob(e));var r,o,i,s,a,u,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c=0,h=0,f=[];if(!e)return e;e+="";do{r=(u=l.indexOf(e.charAt(c++))<<18|l.indexOf(e.charAt(c++))<<12|(s=l.indexOf(e.charAt(c++)))<<6|(a=l.indexOf(e.charAt(c++))))>>16&255,o=u>>8&255,i=255&u,f[h++]=64===s?String.fromCharCode(r):64===a?String.fromCharCode(r,o):String.fromCharCode(r,o,i)}while(c<e.length);return n(f.join("").replace(/\0+$/,""))}}).call(this)}).call(this,t("buffer").Buffer)},{buffer:6}],10:[function(t,e,n){(function(t){(function(){"use strict";e.exports=function(e){var n=function(t){return encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,(function(t,e){return String.fromCharCode("0x"+e)}))};if("undefined"==typeof window)return new t(e).toString("base64");if(void 0!==window.btoa)return window.btoa(n(e));var r,o,i,s,a,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l=0,c=0,h="",f=[];if(!e)return e;e=n(e);do{r=(a=e.charCodeAt(l++)<<16|e.charCodeAt(l++)<<8|e.charCodeAt(l++))>>18&63,o=a>>12&63,i=a>>6&63,s=63&a,f[c++]=u.charAt(r)+u.charAt(o)+u.charAt(i)+u.charAt(s)}while(l<e.length);h=f.join("");var d=e.length%3;return(d?h.slice(0,d-3):h)+"===".slice(d||3)}}).call(this)}).call(this,t("buffer").Buffer)},{buffer:6}],11:[function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.exports=function t(e){var n,o,i="",s=0,a=function(t){var e,n,o,i,s=void 0===t?"undefined":r(t);if("object"===s&&!t)return"null";if("object"===s){if(!t.constructor)return"object";for(n in(e=(o=t.constructor.toString()).match(/(\w+)\(/))&&(o=e[1].toLowerCase()),i=["boolean","number","string","array"])if(o===i[n]){s=i[n];break}}return s},u=a(e);switch(u){case"function":n="";break;case"boolean":n="b:"+(e?"1":"0");break;case"number":n=(Math.round(e)===e?"i":"d")+":"+e;break;case"string":n="s:"+(~-encodeURI(e).split(/%..|./).length+':"')+e+'"';break;case"array":case"object":for(o in n="a",e)if(e.hasOwnProperty(o)){if("function"===a(e[o]))continue;i+=t(o.match(/^[0-9]+$/)?parseInt(o,10):o)+t(e[o]),s++}n+=":"+s+":{"+i+"}";break;case"undefined":default:n="N"}return"object"!==u&&"array"!==u&&(n+=";"),n}},{}],12:[function(t,e,n){"use strict";var r=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&a.return&&a.return()}finally{if(o)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function o(t,e){var n=(/^(?:N(?=;)|[bidsSaOCrR](?=:)|[^:]+(?=:))/g.exec(t)||[])[0];if(!n)throw SyntaxError("Invalid input: "+t);switch(n){case"N":return e([null,2]);case"b":return e(function(t){var e=/^b:([01]);/.exec(t)||[],n=r(e,2),o=n[0],i=n[1];if(!i)throw SyntaxError("Invalid bool value, expected 0 or 1");return["1"===i,o.length]}(t));case"i":return e(i(t));case"d":return e(function(t){var e=/^d:(NAN|-?INF|(?:\d+\.\d*|\d*\.\d+|\d+)(?:[eE][+-]\d+)?);/.exec(t)||[],n=r(e,2),o=n[0],i=n[1];if(!i)throw SyntaxError("Expected a float value");var s=void 0;switch(i){case"NAN":s=Number.NaN;break;case"-INF":s=Number.NEGATIVE_INFINITY;break;case"INF":s=Number.POSITIVE_INFINITY;break;default:s=parseFloat(i)}return[s,o.length]}(t));case"s":return e(a(t));case"S":return e(u(t));case"a":return function(t,e){var n=/^a:(\d+):{/.exec(t)||[],i=r(n,2),s=i[0],a=i[1];if(!a)throw SyntaxError("Expected array length annotation");var u=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments[2],r=void 0,i=!1,s=void 0,a=0,u=[];n([u]);for(var c=0;c<e;c++)r=l(t),i||(i="string"==typeof r[0]),t=t.substr(r[1]),a+=r[1],s=o(t,n),t=t.substr(s[1]),a+=s[1],u[r[0]]=s[0];i&&(u=Object.assign({},u));return[u,a]}(t=t.substr(s.length),parseInt(a,10),e);if("}"!==t.charAt(u[1]))throw SyntaxError("Expected }");return[u[0],s.length+u[1]+1]}(t,e);case"O":return function(t,e){var n=/^O:(\d+):"([^"]+)":(\d+):\{/.exec(t)||[],i=r(n,4),s=i[0],a=i[2],u=i[3];if(!s)throw SyntaxError("Invalid input");if("stdClass"!==a)throw SyntaxError("Unsupported object type: "+a);var c=s.length,h=parseInt(u,10),f={};e([f]),t=t.substr(c);for(var d=0;d<h;d++){var p=l(t);t=t.substr(p[1]),c+=p[1];var g=o(t,e);t=t.substr(g[1]),c+=g[1],f[p[0]]=g[0]}if("}"!==t.charAt(0))throw SyntaxError("Expected }");return[f,c+1]}(t,e);case"C":return function(t,e){throw Error("Not yet implemented")}();case"r":case"R":return function(t,e){var n=/^[rR]:([1-9]\d*);/.exec(t)||[],o=r(n,2),i=o[0],s=o[1];if(!i)throw SyntaxError("Expected reference value");return[e.get(parseInt(s,10)-1),i.length]}(t,e);default:throw SyntaxError("Invalid or unsupported data type: "+n)}}function i(t){var e=/^i:([+-]?\d+);/.exec(t)||[],n=r(e,2),o=n[0],i=n[1];if(!i)throw SyntaxError("Expected an integer value");return[parseInt(i,10),o.length]}function s(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=0,o="",i=0,s=t.length,a=!1,u=0;r<e&&i<s;){var l=t.charAt(i),c=l.charCodeAt(0),h=c>=55296&&c<=56319,f=c>=56320&&c<=57343;n&&"\\"===l&&(l=String.fromCharCode(parseInt(t.substr(i+1,2),16)),u++,i+=2),i++,r+=h||f&&a?2:c>2047?3:c>127?2:1,r+=a&&!f?1:0,o+=l,a=h}return[o,r,u]}function a(t){var e=/^s:(\d+):"/g.exec(t)||[],n=r(e,2),o=n[0],i=n[1];if(!o)throw SyntaxError("Expected a string value");var a=parseInt(i,10),u=s(t=t.substr(o.length),a),l=r(u,2),c=l[0],h=l[1];if(h!==a)throw SyntaxError("Expected string of "+a+" bytes, but got "+h);if(!(t=t.substr(c.length)).startsWith('";'))throw SyntaxError('Expected ";');return[c,o.length+c.length+2]}function u(t){var e=/^S:(\d+):"/g.exec(t)||[],n=r(e,2),o=n[0],i=n[1];if(!o)throw SyntaxError("Expected an escaped string value");var a=parseInt(i,10),u=s(t=t.substr(o.length),a,!0),l=r(u,3),c=l[0],h=l[1],f=l[2];if(h!==a)throw SyntaxError("Expected escaped string of "+a+" bytes, but got "+h);if(!(t=t.substr(c.length+2*f)).startsWith('";'))throw SyntaxError('Expected ";');return[c,o.length+c.length+2]}function l(t){try{return a(t)}catch(t){}try{return u(t)}catch(t){}try{return i(t)}catch(t){throw SyntaxError("Expected key or index")}}e.exports=function(t){try{return"string"==typeof t&&o(t,(e=[],n=function(t){return e.push(t[0]),t},n.get=function(t){if(t>=e.length)throw RangeError("Can't resolve reference "+(t+1));return e[t]},n))[0]}catch(t){return console.error(t),!1}var e,n}},{}],13:[function(t,e,n){!function(t,r){"object"==typeof n&&void 0!==e?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(t.pell={})}(this,(function(t){"use strict";var e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},n="defaultParagraphSeparator",r="formatBlock",o=function(t,e,n){return t.addEventListener(e,n)},i=function(t,e){return t.appendChild(e)},s=function(t){return document.createElement(t)},a=function(t){return document.queryCommandState(t)},u=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return document.execCommand(t,!1,e)},l={bold:{icon:"<b>B</b>",title:"Bold",state:function(){return a("bold")},result:function(){return u("bold")}},italic:{icon:"<i>I</i>",title:"Italic",state:function(){return a("italic")},result:function(){return u("italic")}},underline:{icon:"<u>U</u>",title:"Underline",state:function(){return a("underline")},result:function(){return u("underline")}},strikethrough:{icon:"<strike>S</strike>",title:"Strike-through",state:function(){return a("strikeThrough")},result:function(){return u("strikeThrough")}},heading1:{icon:"<b>H<sub>1</sub></b>",title:"Heading 1",result:function(){return u(r,"<h1>")}},heading2:{icon:"<b>H<sub>2</sub></b>",title:"Heading 2",result:function(){return u(r,"<h2>")}},paragraph:{icon:"&#182;",title:"Paragraph",result:function(){return u(r,"<p>")}},quote:{icon:"&#8220; &#8221;",title:"Quote",result:function(){return u(r,"<blockquote>")}},olist:{icon:"&#35;",title:"Ordered List",result:function(){return u("insertOrderedList")}},ulist:{icon:"&#8226;",title:"Unordered List",result:function(){return u("insertUnorderedList")}},code:{icon:"&lt;/&gt;",title:"Code",result:function(){return u(r,"<pre>")}},line:{icon:"&#8213;",title:"Horizontal Line",result:function(){return u("insertHorizontalRule")}},link:{icon:"&#128279;",title:"Link",result:function(){var t=window.prompt("Enter the link URL");t&&u("createLink",t)}},image:{icon:"&#128247;",title:"Image",result:function(){var t=window.prompt("Enter the image URL");t&&u("insertImage",t)}}},c={actionbar:"pell-actionbar",button:"pell-button",content:"pell-content",selected:"pell-button-selected"},h=function(t){var a=t.actions?t.actions.map((function(t){return"string"==typeof t?l[t]:l[t.name]?e({},l[t.name],t):t})):Object.keys(l).map((function(t){return l[t]})),h=e({},c,t.classes),f=t[n]||"div",d=s("div");d.className=h.actionbar,i(t.element,d);var p=t.element.content=s("div");return p.contentEditable=!0,p.className=h.content,p.oninput=function(e){var n=e.target.firstChild;n&&3===n.nodeType?u(r,"<"+f+">"):"<br>"===p.innerHTML&&(p.innerHTML=""),t.onChange(p.innerHTML)},p.onkeydown=function(t){"Enter"===t.key&&"blockquote"===(r,document.queryCommandValue("formatBlock"))&&setTimeout((function(){return u(r,"<"+f+">")}),0)},i(t.element,p),a.forEach((function(t){var e=s("button");if(e.className=h.button,e.innerHTML=t.icon,e.title=t.title,e.setAttribute("type","button"),e.onclick=function(){return t.result()&&p.focus()},t.state){var n=function(){return e.classList[t.state()?"add":"remove"](h.selected)};o(p,"keyup",n),o(p,"mouseup",n),o(e,"click",n)}i(d,e)})),t.styleWithCSS&&u("styleWithCSS"),u(n,f),t.element},f={exec:u,init:h};t.exec=u,t.init=h,t.default=f,Object.defineProperty(t,"__esModule",{value:!0})}))},{}]},{},[2]);