(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _pell = _interopRequireDefault(require("pell"));

class WysiwygEditor {
  constructor() {}

  init(el) {
    if (el !== null) {
      // check if is html
      if (!Array.from(new DOMParser().parseFromString(el.value, 'text/html').body.childNodes).some(node => node.nodeType === 1)) {
        return;
      }

      el.classList.add('gtbabel__wysiwyg-textarea');
      let wrapper = document.createElement('div');
      wrapper.setAttribute('class', 'gtbabel__wysiwyg gtbabel__wysiwyg--mode-visual');
      el.parentNode.insertBefore(wrapper, el.nextSibling);
      wrapper.appendChild(el);
      wrapper.insertAdjacentHTML('afterbegin', `
                <div class="gtbabel__wysiwyg-buttons">
                    <a class="gtbabel__wysiwyg-button gtbabel__wysiwyg-button--visual" href="#">Visuell</a>
                    <a class="gtbabel__wysiwyg-button gtbabel__wysiwyg-button--html" href="#">HTML</a>
                </div>
            `);
      wrapper.querySelectorAll('.gtbabel__wysiwyg-button').forEach(button => {
        button.addEventListener('click', e => {
          if (e.target.classList.contains('gtbabel__wysiwyg-button--html') && wrapper.classList.contains('gtbabel__wysiwyg--mode-visual')) {
            wrapper.classList.remove('gtbabel__wysiwyg--mode-visual');
            wrapper.classList.add('gtbabel__wysiwyg--mode-html');
          }

          if (e.target.classList.contains('gtbabel__wysiwyg-button--visual') && wrapper.classList.contains('gtbabel__wysiwyg--mode-html')) {
            wrapper.classList.remove('gtbabel__wysiwyg--mode-html');
            wrapper.classList.add('gtbabel__wysiwyg--mode-visual');
          }

          e.preventDefault();
        });
      });
      let container = document.createElement('div');
      container.setAttribute('class', 'gtbabel__wysiwyg-editor');
      wrapper.appendChild(container);

      let editor = _pell.default.init({
        element: container,
        onChange: html => {
          // strip away surrounding p tags
          if (1 == 1) {
            html = html.replace(/^<div>/g, '').replace(/<\/div>$/g, '').replace(/<\/div>(\r\n|\r|\n)?<div.*?>/g, '<br/>').replace(/<div.*?>/g, '').replace(/<\/div>/g, '');
          }

          el.value = html;
        },
        defaultParagraphSeparator: 'div',
        styleWithCSS: false,
        actions: ['bold', 'underline', 'italic', 'ulist', 'olist']
      });

      if (el.hasAttribute('readonly')) {
        container.classList.add('gtbabel__wysiwyg-editor--readonly');
        editor.content.removeAttribute('contenteditable');
      }

      editor.content.innerHTML = '<div>' + el.value + '</div>';
      el.addEventListener('keyup', () => {
        editor.content.innerHTML = '<div>' + el.value + '</div>';
      });
    }
  }

}

exports.default = WysiwygEditor;

},{"@babel/runtime/helpers/interopRequireDefault":3,"pell":4}],2:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _WysiwygEditor = _interopRequireDefault(require("./WysiwygEditor"));

const w = new _WysiwygEditor.default();
w.init();

},{"./WysiwygEditor":1,"@babel/runtime/helpers/interopRequireDefault":3}],3:[function(require,module,exports){
function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : {
    "default": obj
  };
}

module.exports = _interopRequireDefault;
},{}],4:[function(require,module,exports){
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.pell={})}(this,function(t){"use strict";var e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},c="defaultParagraphSeparator",l="formatBlock",a=function(t,e,n){return t.addEventListener(e,n)},s=function(t,e){return t.appendChild(e)},d=function(t){return document.createElement(t)},n=function(t){return document.queryCommandState(t)},f=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return document.execCommand(t,!1,e)},p={bold:{icon:"<b>B</b>",title:"Bold",state:function(){return n("bold")},result:function(){return f("bold")}},italic:{icon:"<i>I</i>",title:"Italic",state:function(){return n("italic")},result:function(){return f("italic")}},underline:{icon:"<u>U</u>",title:"Underline",state:function(){return n("underline")},result:function(){return f("underline")}},strikethrough:{icon:"<strike>S</strike>",title:"Strike-through",state:function(){return n("strikeThrough")},result:function(){return f("strikeThrough")}},heading1:{icon:"<b>H<sub>1</sub></b>",title:"Heading 1",result:function(){return f(l,"<h1>")}},heading2:{icon:"<b>H<sub>2</sub></b>",title:"Heading 2",result:function(){return f(l,"<h2>")}},paragraph:{icon:"&#182;",title:"Paragraph",result:function(){return f(l,"<p>")}},quote:{icon:"&#8220; &#8221;",title:"Quote",result:function(){return f(l,"<blockquote>")}},olist:{icon:"&#35;",title:"Ordered List",result:function(){return f("insertOrderedList")}},ulist:{icon:"&#8226;",title:"Unordered List",result:function(){return f("insertUnorderedList")}},code:{icon:"&lt;/&gt;",title:"Code",result:function(){return f(l,"<pre>")}},line:{icon:"&#8213;",title:"Horizontal Line",result:function(){return f("insertHorizontalRule")}},link:{icon:"&#128279;",title:"Link",result:function(){var t=window.prompt("Enter the link URL");t&&f("createLink",t)}},image:{icon:"&#128247;",title:"Image",result:function(){var t=window.prompt("Enter the image URL");t&&f("insertImage",t)}}},m={actionbar:"pell-actionbar",button:"pell-button",content:"pell-content",selected:"pell-button-selected"},r=function(n){var t=n.actions?n.actions.map(function(t){return"string"==typeof t?p[t]:p[t.name]?e({},p[t.name],t):t}):Object.keys(p).map(function(t){return p[t]}),r=e({},m,n.classes),i=n[c]||"div",o=d("div");o.className=r.actionbar,s(n.element,o);var u=n.element.content=d("div");return u.contentEditable=!0,u.className=r.content,u.oninput=function(t){var e=t.target.firstChild;e&&3===e.nodeType?f(l,"<"+i+">"):"<br>"===u.innerHTML&&(u.innerHTML=""),n.onChange(u.innerHTML)},u.onkeydown=function(t){var e;"Enter"===t.key&&"blockquote"===(e=l,document.queryCommandValue(e))&&setTimeout(function(){return f(l,"<"+i+">")},0)},s(n.element,u),t.forEach(function(t){var e=d("button");if(e.className=r.button,e.innerHTML=t.icon,e.title=t.title,e.setAttribute("type","button"),e.onclick=function(){return t.result()&&u.focus()},t.state){var n=function(){return e.classList[t.state()?"add":"remove"](r.selected)};a(u,"keyup",n),a(u,"mouseup",n),a(e,"click",n)}s(o,e)}),n.styleWithCSS&&f("styleWithCSS"),f(c,i),n.element},i={exec:f,init:r};t.exec=f,t.init=r,t.default=i,Object.defineProperty(t,"__esModule",{value:!0})});

},{}]},{},[2])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJjb21wb25lbnRzL3d5c2l3eWdlZGl0b3IvV3lzaXd5Z0VkaXRvci5qcyIsImNvbXBvbmVudHMvd3lzaXd5Z2VkaXRvci9zY3JpcHQuanMiLCJub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pbnRlcm9wUmVxdWlyZURlZmF1bHQuanMiLCJub2RlX21vZHVsZXMvcGVsbC9kaXN0L3BlbGwubWluLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7O0FDQUE7O0FBRWUsTUFBTSxhQUFOLENBQW9CO0FBQy9CLEVBQUEsV0FBVyxHQUFHLENBQUU7O0FBRWhCLEVBQUEsSUFBSSxDQUFDLEVBQUQsRUFBSztBQUNMLFFBQUksRUFBRSxLQUFLLElBQVgsRUFBaUI7QUFDYjtBQUNBLFVBQ0ksQ0FBQyxLQUFLLENBQUMsSUFBTixDQUFXLElBQUksU0FBSixHQUFnQixlQUFoQixDQUFnQyxFQUFFLENBQUMsS0FBbkMsRUFBMEMsV0FBMUMsRUFBdUQsSUFBdkQsQ0FBNEQsVUFBdkUsRUFBbUYsSUFBbkYsQ0FDRyxJQUFJLElBQUksSUFBSSxDQUFDLFFBQUwsS0FBa0IsQ0FEN0IsQ0FETCxFQUlFO0FBQ0U7QUFDSDs7QUFFRCxNQUFBLEVBQUUsQ0FBQyxTQUFILENBQWEsR0FBYixDQUFpQiwyQkFBakI7QUFFQSxVQUFJLE9BQU8sR0FBRyxRQUFRLENBQUMsYUFBVCxDQUF1QixLQUF2QixDQUFkO0FBQ0EsTUFBQSxPQUFPLENBQUMsWUFBUixDQUFxQixPQUFyQixFQUE4QixnREFBOUI7QUFDQSxNQUFBLEVBQUUsQ0FBQyxVQUFILENBQWMsWUFBZCxDQUEyQixPQUEzQixFQUFvQyxFQUFFLENBQUMsV0FBdkM7QUFDQSxNQUFBLE9BQU8sQ0FBQyxXQUFSLENBQW9CLEVBQXBCO0FBRUEsTUFBQSxPQUFPLENBQUMsa0JBQVIsQ0FDSSxZQURKLEVBRUs7QUFDakI7QUFD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ZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCJpbXBvcnQgcGVsbCBmcm9tICdwZWxsJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFd5c2l3eWdFZGl0b3Ige1xyXG4gICAgY29uc3RydWN0b3IoKSB7fVxyXG5cclxuICAgIGluaXQoZWwpIHtcclxuICAgICAgICBpZiAoZWwgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgLy8gY2hlY2sgaWYgaXMgaHRtbFxyXG4gICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICAhQXJyYXkuZnJvbShuZXcgRE9NUGFyc2VyKCkucGFyc2VGcm9tU3RyaW5nKGVsLnZhbHVlLCAndGV4dC9odG1sJykuYm9keS5jaGlsZE5vZGVzKS5zb21lKFxyXG4gICAgICAgICAgICAgICAgICAgIG5vZGUgPT4gbm9kZS5ub2RlVHlwZSA9PT0gMVxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZWwuY2xhc3NMaXN0LmFkZCgnZ3RiYWJlbF9fd3lzaXd5Zy10ZXh0YXJlYScpO1xyXG5cclxuICAgICAgICAgICAgbGV0IHdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgd3JhcHBlci5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ2d0YmFiZWxfX3d5c2l3eWcgZ3RiYWJlbF9fd3lzaXd5Zy0tbW9kZS12aXN1YWwnKTtcclxuICAgICAgICAgICAgZWwucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUod3JhcHBlciwgZWwubmV4dFNpYmxpbmcpO1xyXG4gICAgICAgICAgICB3cmFwcGVyLmFwcGVuZENoaWxkKGVsKTtcclxuXHJcbiAgICAgICAgICAgIHdyYXBwZXIuaW5zZXJ0QWRqYWNlbnRIVE1MKFxyXG4gICAgICAgICAgICAgICAgJ2FmdGVyYmVnaW4nLFxyXG4gICAgICAgICAgICAgICAgYFxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImd0YmFiZWxfX3d5c2l3eWctYnV0dG9uc1wiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxhIGNsYXNzPVwiZ3RiYWJlbF9fd3lzaXd5Zy1idXR0b24gZ3RiYWJlbF9fd3lzaXd5Zy1idXR0b24tLXZpc3VhbFwiIGhyZWY9XCIjXCI+VmlzdWVsbDwvYT5cclxuICAgICAgICAgICAgICAgICAgICA8YSBjbGFzcz1cImd0YmFiZWxfX3d5c2l3eWctYnV0dG9uIGd0YmFiZWxfX3d5c2l3eWctYnV0dG9uLS1odG1sXCIgaHJlZj1cIiNcIj5IVE1MPC9hPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIGBcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgd3JhcHBlci5xdWVyeVNlbGVjdG9yQWxsKCcuZ3RiYWJlbF9fd3lzaXd5Zy1idXR0b24nKS5mb3JFYWNoKGJ1dHRvbiA9PiB7XHJcbiAgICAgICAgICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZ3RiYWJlbF9fd3lzaXd5Zy1idXR0b24tLWh0bWwnKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3cmFwcGVyLmNsYXNzTGlzdC5jb250YWlucygnZ3RiYWJlbF9fd3lzaXd5Zy0tbW9kZS12aXN1YWwnKVxyXG4gICAgICAgICAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3cmFwcGVyLmNsYXNzTGlzdC5yZW1vdmUoJ2d0YmFiZWxfX3d5c2l3eWctLW1vZGUtdmlzdWFsJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyYXBwZXIuY2xhc3NMaXN0LmFkZCgnZ3RiYWJlbF9fd3lzaXd5Zy0tbW9kZS1odG1sJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdndGJhYmVsX193eXNpd3lnLWJ1dHRvbi0tdmlzdWFsJykgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgd3JhcHBlci5jbGFzc0xpc3QuY29udGFpbnMoJ2d0YmFiZWxfX3d5c2l3eWctLW1vZGUtaHRtbCcpXHJcbiAgICAgICAgICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyYXBwZXIuY2xhc3NMaXN0LnJlbW92ZSgnZ3RiYWJlbF9fd3lzaXd5Zy0tbW9kZS1odG1sJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyYXBwZXIuY2xhc3NMaXN0LmFkZCgnZ3RiYWJlbF9fd3lzaXd5Zy0tbW9kZS12aXN1YWwnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgbGV0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBjb250YWluZXIuc2V0QXR0cmlidXRlKCdjbGFzcycsICdndGJhYmVsX193eXNpd3lnLWVkaXRvcicpO1xyXG4gICAgICAgICAgICB3cmFwcGVyLmFwcGVuZENoaWxkKGNvbnRhaW5lcik7XHJcblxyXG4gICAgICAgICAgICBsZXQgZWRpdG9yID0gcGVsbC5pbml0KHtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGNvbnRhaW5lcixcclxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiBodG1sID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBzdHJpcCBhd2F5IHN1cnJvdW5kaW5nIHAgdGFnc1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgxID09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaHRtbCA9IGh0bWxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9ePGRpdj4vZywgJycpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvPFxcL2Rpdj4kL2csICcnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoLzxcXC9kaXY+KFxcclxcbnxcXHJ8XFxuKT88ZGl2Lio/Pi9nLCAnPGJyLz4nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoLzxkaXYuKj8+L2csICcnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoLzxcXC9kaXY+L2csICcnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWwudmFsdWUgPSBodG1sO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGRlZmF1bHRQYXJhZ3JhcGhTZXBhcmF0b3I6ICdkaXYnLFxyXG4gICAgICAgICAgICAgICAgc3R5bGVXaXRoQ1NTOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGFjdGlvbnM6IFsnYm9sZCcsICd1bmRlcmxpbmUnLCAnaXRhbGljJywgJ3VsaXN0JywgJ29saXN0J11cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGlmIChlbC5oYXNBdHRyaWJ1dGUoJ3JlYWRvbmx5JykpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdndGJhYmVsX193eXNpd3lnLWVkaXRvci0tcmVhZG9ubHknKTtcclxuICAgICAgICAgICAgICAgIGVkaXRvci5jb250ZW50LnJlbW92ZUF0dHJpYnV0ZSgnY29udGVudGVkaXRhYmxlJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWRpdG9yLmNvbnRlbnQuaW5uZXJIVE1MID0gJzxkaXY+JyArIGVsLnZhbHVlICsgJzwvZGl2Pic7XHJcbiAgICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgZWRpdG9yLmNvbnRlbnQuaW5uZXJIVE1MID0gJzxkaXY+JyArIGVsLnZhbHVlICsgJzwvZGl2Pic7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgV3lzaXd5Z0VkaXRvciBmcm9tICcuL1d5c2l3eWdFZGl0b3InO1xyXG5jb25zdCB3ID0gbmV3IFd5c2l3eWdFZGl0b3IoKTtcclxuXHJcbncuaW5pdCgpO1xyXG4iLCJmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikge1xuICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDoge1xuICAgIFwiZGVmYXVsdFwiOiBvYmpcbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0OyIsIiFmdW5jdGlvbih0LGUpe1wib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgbW9kdWxlP2UoZXhwb3J0cyk6XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShbXCJleHBvcnRzXCJdLGUpOmUodC5wZWxsPXt9KX0odGhpcyxmdW5jdGlvbih0KXtcInVzZSBzdHJpY3RcIjt2YXIgZT1PYmplY3QuYXNzaWdufHxmdW5jdGlvbih0KXtmb3IodmFyIGU9MTtlPGFyZ3VtZW50cy5sZW5ndGg7ZSsrKXt2YXIgbj1hcmd1bWVudHNbZV07Zm9yKHZhciByIGluIG4pT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG4scikmJih0W3JdPW5bcl0pfXJldHVybiB0fSxjPVwiZGVmYXVsdFBhcmFncmFwaFNlcGFyYXRvclwiLGw9XCJmb3JtYXRCbG9ja1wiLGE9ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0LmFkZEV2ZW50TGlzdGVuZXIoZSxuKX0scz1mdW5jdGlvbih0LGUpe3JldHVybiB0LmFwcGVuZENoaWxkKGUpfSxkPWZ1bmN0aW9uKHQpe3JldHVybiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHQpfSxuPWZ1bmN0aW9uKHQpe3JldHVybiBkb2N1bWVudC5xdWVyeUNvbW1hbmRTdGF0ZSh0KX0sZj1mdW5jdGlvbih0KXt2YXIgZT0xPGFyZ3VtZW50cy5sZW5ndGgmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06bnVsbDtyZXR1cm4gZG9jdW1lbnQuZXhlY0NvbW1hbmQodCwhMSxlKX0scD17Ym9sZDp7aWNvbjpcIjxiPkI8L2I+XCIsdGl0bGU6XCJCb2xkXCIsc3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gbihcImJvbGRcIil9LHJlc3VsdDpmdW5jdGlvbigpe3JldHVybiBmKFwiYm9sZFwiKX19LGl0YWxpYzp7aWNvbjpcIjxpPkk8L2k+XCIsdGl0bGU6XCJJdGFsaWNcIixzdGF0ZTpmdW5jdGlvbigpe3JldHVybiBuKFwiaXRhbGljXCIpfSxyZXN1bHQ6ZnVuY3Rpb24oKXtyZXR1cm4gZihcIml0YWxpY1wiKX19LHVuZGVybGluZTp7aWNvbjpcIjx1PlU8L3U+XCIsdGl0bGU6XCJVbmRlcmxpbmVcIixzdGF0ZTpmdW5jdGlvbigpe3JldHVybiBuKFwidW5kZXJsaW5lXCIpfSxyZXN1bHQ6ZnVuY3Rpb24oKXtyZXR1cm4gZihcInVuZGVybGluZVwiKX19LHN0cmlrZXRocm91Z2g6e2ljb246XCI8c3RyaWtlPlM8L3N0cmlrZT5cIix0aXRsZTpcIlN0cmlrZS10aHJvdWdoXCIsc3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gbihcInN0cmlrZVRocm91Z2hcIil9LHJlc3VsdDpmdW5jdGlvbigpe3JldHVybiBmKFwic3RyaWtlVGhyb3VnaFwiKX19LGhlYWRpbmcxOntpY29uOlwiPGI+SDxzdWI+MTwvc3ViPjwvYj5cIix0aXRsZTpcIkhlYWRpbmcgMVwiLHJlc3VsdDpmdW5jdGlvbigpe3JldHVybiBmKGwsXCI8aDE+XCIpfX0saGVhZGluZzI6e2ljb246XCI8Yj5IPHN1Yj4yPC9zdWI+PC9iPlwiLHRpdGxlOlwiSGVhZGluZyAyXCIscmVzdWx0OmZ1bmN0aW9uKCl7cmV0dXJuIGYobCxcIjxoMj5cIil9fSxwYXJhZ3JhcGg6e2ljb246XCImIzE4MjtcIix0aXRsZTpcIlBhcmFncmFwaFwiLHJlc3VsdDpmdW5jdGlvbigpe3JldHVybiBmKGwsXCI8cD5cIil9fSxxdW90ZTp7aWNvbjpcIiYjODIyMDsgJiM4MjIxO1wiLHRpdGxlOlwiUXVvdGVcIixyZXN1bHQ6ZnVuY3Rpb24oKXtyZXR1cm4gZihsLFwiPGJsb2NrcXVvdGU+XCIpfX0sb2xpc3Q6e2ljb246XCImIzM1O1wiLHRpdGxlOlwiT3JkZXJlZCBMaXN0XCIscmVzdWx0OmZ1bmN0aW9uKCl7cmV0dXJuIGYoXCJpbnNlcnRPcmRlcmVkTGlzdFwiKX19LHVsaXN0OntpY29uOlwiJiM4MjI2O1wiLHRpdGxlOlwiVW5vcmRlcmVkIExpc3RcIixyZXN1bHQ6ZnVuY3Rpb24oKXtyZXR1cm4gZihcImluc2VydFVub3JkZXJlZExpc3RcIil9fSxjb2RlOntpY29uOlwiJmx0Oy8mZ3Q7XCIsdGl0bGU6XCJDb2RlXCIscmVzdWx0OmZ1bmN0aW9uKCl7cmV0dXJuIGYobCxcIjxwcmU+XCIpfX0sbGluZTp7aWNvbjpcIiYjODIxMztcIix0aXRsZTpcIkhvcml6b250YWwgTGluZVwiLHJlc3VsdDpmdW5jdGlvbigpe3JldHVybiBmKFwiaW5zZXJ0SG9yaXpvbnRhbFJ1bGVcIil9fSxsaW5rOntpY29uOlwiJiMxMjgyNzk7XCIsdGl0bGU6XCJMaW5rXCIscmVzdWx0OmZ1bmN0aW9uKCl7dmFyIHQ9d2luZG93LnByb21wdChcIkVudGVyIHRoZSBsaW5rIFVSTFwiKTt0JiZmKFwiY3JlYXRlTGlua1wiLHQpfX0saW1hZ2U6e2ljb246XCImIzEyODI0NztcIix0aXRsZTpcIkltYWdlXCIscmVzdWx0OmZ1bmN0aW9uKCl7dmFyIHQ9d2luZG93LnByb21wdChcIkVudGVyIHRoZSBpbWFnZSBVUkxcIik7dCYmZihcImluc2VydEltYWdlXCIsdCl9fX0sbT17YWN0aW9uYmFyOlwicGVsbC1hY3Rpb25iYXJcIixidXR0b246XCJwZWxsLWJ1dHRvblwiLGNvbnRlbnQ6XCJwZWxsLWNvbnRlbnRcIixzZWxlY3RlZDpcInBlbGwtYnV0dG9uLXNlbGVjdGVkXCJ9LHI9ZnVuY3Rpb24obil7dmFyIHQ9bi5hY3Rpb25zP24uYWN0aW9ucy5tYXAoZnVuY3Rpb24odCl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIHQ/cFt0XTpwW3QubmFtZV0/ZSh7fSxwW3QubmFtZV0sdCk6dH0pOk9iamVjdC5rZXlzKHApLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gcFt0XX0pLHI9ZSh7fSxtLG4uY2xhc3NlcyksaT1uW2NdfHxcImRpdlwiLG89ZChcImRpdlwiKTtvLmNsYXNzTmFtZT1yLmFjdGlvbmJhcixzKG4uZWxlbWVudCxvKTt2YXIgdT1uLmVsZW1lbnQuY29udGVudD1kKFwiZGl2XCIpO3JldHVybiB1LmNvbnRlbnRFZGl0YWJsZT0hMCx1LmNsYXNzTmFtZT1yLmNvbnRlbnQsdS5vbmlucHV0PWZ1bmN0aW9uKHQpe3ZhciBlPXQudGFyZ2V0LmZpcnN0Q2hpbGQ7ZSYmMz09PWUubm9kZVR5cGU/ZihsLFwiPFwiK2krXCI+XCIpOlwiPGJyPlwiPT09dS5pbm5lckhUTUwmJih1LmlubmVySFRNTD1cIlwiKSxuLm9uQ2hhbmdlKHUuaW5uZXJIVE1MKX0sdS5vbmtleWRvd249ZnVuY3Rpb24odCl7dmFyIGU7XCJFbnRlclwiPT09dC5rZXkmJlwiYmxvY2txdW90ZVwiPT09KGU9bCxkb2N1bWVudC5xdWVyeUNvbW1hbmRWYWx1ZShlKSkmJnNldFRpbWVvdXQoZnVuY3Rpb24oKXtyZXR1cm4gZihsLFwiPFwiK2krXCI+XCIpfSwwKX0scyhuLmVsZW1lbnQsdSksdC5mb3JFYWNoKGZ1bmN0aW9uKHQpe3ZhciBlPWQoXCJidXR0b25cIik7aWYoZS5jbGFzc05hbWU9ci5idXR0b24sZS5pbm5lckhUTUw9dC5pY29uLGUudGl0bGU9dC50aXRsZSxlLnNldEF0dHJpYnV0ZShcInR5cGVcIixcImJ1dHRvblwiKSxlLm9uY2xpY2s9ZnVuY3Rpb24oKXtyZXR1cm4gdC5yZXN1bHQoKSYmdS5mb2N1cygpfSx0LnN0YXRlKXt2YXIgbj1mdW5jdGlvbigpe3JldHVybiBlLmNsYXNzTGlzdFt0LnN0YXRlKCk/XCJhZGRcIjpcInJlbW92ZVwiXShyLnNlbGVjdGVkKX07YSh1LFwia2V5dXBcIixuKSxhKHUsXCJtb3VzZXVwXCIsbiksYShlLFwiY2xpY2tcIixuKX1zKG8sZSl9KSxuLnN0eWxlV2l0aENTUyYmZihcInN0eWxlV2l0aENTU1wiKSxmKGMsaSksbi5lbGVtZW50fSxpPXtleGVjOmYsaW5pdDpyfTt0LmV4ZWM9Zix0LmluaXQ9cix0LmRlZmF1bHQ9aSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KX0pO1xuIl19
